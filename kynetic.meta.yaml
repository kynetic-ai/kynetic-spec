kynetic_meta: "1.0"
agents:
  - _ulid: 01KF782ZSF5ZQTN2PKZPH6ASKA
    id: claude
    name: Claude Code Agent
    description: |
      Primary AI development agent for kynetic-spec.
      Works via Claude Code CLI in terminal sessions.
    capabilities:
      - code
      - test
      - refactor
      - review
      - design
      - document
    tools:
      - kspec
      - git
      - npm
      - vitest
    session_protocol:
      start: kspec session start
      checkpoint: kspec session checkpoint
    conventions:
      - Always use kspec CLI, never edit YAML directly
      - Add notes when completing significant work
      - Check spec coverage before implementing behavior changes
      - Commit changes before ending session
  - _ulid: 01KF7HMDT7TKRTSD78X6WAGBFV
    id: json-test
    name: JSON Test
    description: ""
    capabilities: []
    tools: []
    conventions: []
  - _ulid: 01KF7HN2D6GAAK99TN68N6NXVB
    id: json-test2
    name: JSON Test 2
    description: ""
    capabilities: []
    tools: []
    conventions: []
workflows:
  - _ulid: 01KF782ZSH8JG4CCJRWVQQ9G5R
    id: spec-first
    trigger: behavior-change
    description: |
      Check spec coverage before implementing changes.
      Core principle: If changing behavior and spec doesn't cover it,
      update the spec first.
    steps:
      - type: check
        content: Does the spec cover this change?
        on_fail: Update or create spec before proceeding
      - type: decision
        content: What is the spec status?
        options:
          - Spec exists and matches -> Derive task, proceed
          - Spec exists but outdated -> Update spec first
          - No spec exists -> Create spec first (behavior) or task directly (infra)
      - type: action
        content: Update or create spec item if needed
      - type: action
        content: Derive task from spec via kspec derive @spec-item
      - type: action
        content: Implement the change
  - _ulid: 01KF782ZSH103A99NV1VY65CFB
    id: session-start
    trigger: session-start
    description: |
      Get context at the beginning of a work session.
    steps:
      - type: action
        content: Run kspec session start to get context
      - type: check
        content: Are there active (in_progress) tasks?
        on_fail: Pick from ready tasks or triage inbox
      - type: action
        content: Review ready tasks and inbox items
      - type: action
        content: Start work on chosen task via kspec task start
  - _ulid: 01KF782ZSJH58GHDTHC873XJMA
    id: task-lifecycle
    trigger: task-complete
    description: |
      Complete a task properly with notes and cleanup.
    steps:
      - type: action
        content: Add completion note describing what was done
      - type: action
        content: Run kspec task complete @task --reason "summary"
      - type: check
        content: Are there uncommitted changes?
        on_fail: Commit changes with descriptive message
      - type: action
        content: Review if task unblocked other work
  - _ulid: 01KF782ZSJYAF3XCN89YD44XYM
    id: inbox-triage
    trigger: session-start
    description: |
      Triage inbox items during session context review.
    steps:
      - type: action
        content: Review oldest inbox items first
      - type: decision
        content: For each item, ask these questions
        options:
          - Still relevant? No -> delete
          - Scope clear? Yes -> promote to task
          - Needs spec work? -> Create/update spec first
          - Still unclear? -> Leave, add tag, revisit later
      - type: check
        content: Has item survived 3+ triage sessions?
        on_fail: Either promote with clear scope or delete
  - _ulid: 01KFBQCCJFBAAT6JAP5KYTKRHV
    id: codebase-audit
    trigger: pre-release
    description: "Comprehensive codebase audit for release readiness. Five-phase workflow: parallel
      exploration (docs, code, config, tests, specs), compilation by severity, interactive triage,
      execution, and summary."
    steps: []
conventions:
  - _ulid: 01KF782ZSJCXRCGV0QJ8Y9AKN2
    domain: commits
    rules:
      - Use conventional commit format (feat, fix, docs, refactor, test, chore)
      - Reference task in commit body when applicable
      - Keep subject line under 72 characters
      - Include Co-Authored-By for AI contributions
    examples:
      - good: "feat: add user login flow"
        bad: Added login
      - good: "fix(auth): handle expired tokens"
        bad: fixed bug
  - _ulid: 01KF782ZSJ20FHWEXH93VB74Q5
    domain: notes
    rules:
      - Add notes when completing significant work
      - Include what was done, approach taken, and why
      - Note any deviations from plan or unexpected findings
      - Keep notes concise but informative for future context
    examples:
      - good: Implemented retry logic with exponential backoff. Chose 3 retries max based on API rate
          limits.
        bad: Done
  - _ulid: 01KF782ZSJZB6HWGFS01TM2R0R
    domain: naming
    rules:
      - Use kebab-case for slugs (task-user-login, not taskUserLogin)
      - Prefix task slugs with 'task-' for clarity
      - Use descriptive names that indicate purpose
      - Keep slugs short but unambiguous
    examples: []
  - _ulid: 01KF782ZSJ6HS09DBK7SVX5RR0
    domain: tags
    rules:
      - Use lowercase tags
      - Standard tags include mvp, post-mvp, bug, feature, infra, design
      - Add domain tags like cli, schema, parser, tasks
      - Limit to 3-5 tags per item for focus
    examples: []
  - _ulid: 01KF8BNJPQS0TKAGRD9PPGW6CS
    domain: branching
    rules:
      - Use descriptive branch names that indicate the type and scope of work
      - "Use prefixes: feat/ for features, fix/ for bug fixes, refactor/ for refactoring, docs/ for
        documentation"
      - Keep branch names short but meaningful (e.g., feat/user-auth, fix/login-crash)
      - Use kebab-case for branch names
    examples: []
  - _ulid: 01KF8BNQXGBBFYRDJKYQHAEDCC
    domain: documentation
    rules:
      - Write clear, concise documentation that explains why, not just what
      - Include examples for non-trivial concepts
      - Keep documentation close to code (inline comments for complex logic, README for overview)
      - Update documentation when behavior changes
    examples: []
observations:
  - _ulid: 01KF89NXNJVRJQ6RTHJ310SHXC
    type: idea
    workflow_ref: "@session-start"
    content: Need better error messages
    created_at: 2026-01-18T10:16:15.283Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:06.781Z
    resolved_by: "@claude"
    promoted_to: "@01KF89NY"
  - _ulid: 01KF93NC0FXND1244CN31ZH22Z
    type: friction
    content: "ReferenceIndex Result<T> pattern gotcha: resolve() returns Result objects with .ok field,
      not items directly. Must check result.ok before accessing result.item - TypeScript doesn't
      enforce this at compile time. Pattern: if (result.ok) { use result.item } else { handle error
      }. Encountered multiple times across iterations."
    created_at: 2026-01-18T17:50:20.175Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:07.260Z
    resolved_by: "@claude"
  - _ulid: 01KF93NCXZNXTPWAPCFPNH0STG
    type: friction
    content: "Linter/tooling auto-revert blocker: During ralph loop iterations, file changes were
      repeatedly auto-reverted by linter/auto-save system. Code written and verified would disappear
      after edits. Affected shadow.ts, index.ts, test files. Possible causes: aggressive
      format-on-save, linter deleting code it doesn't understand, file watcher conflicts. Blocks
      implementation work when it occurs."
    created_at: 2026-01-18T17:50:21.120Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:07.778Z
    resolved_by: "@claude"
  - _ulid: 01KF93NDYAX7CWP4QP7072AHMH
    type: friction
    content: "Ralph loop session state freshness: Multiple issues with stale state in automation loops.
      (1) Iteration started on non-main branch from previous session. (2) Session context showed
      already-completed task as ready because context generated before commits reflected. (3) Picked
      completed work repeatedly. Solutions: generate context AFTER pulling latest, validate task is
      actually pending before starting, checkpoint script should update .kspec before next
      iteration."
    created_at: 2026-01-18T17:50:22.155Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:08.181Z
    resolved_by: "@claude"
  - _ulid: 01KF93P6NTQJP3C2ZSND2J2MZT
    type: friction
    content: "Subprocess spawning complexity: When promoting observations to tasks, initially tried
      spawning npm/tsx subprocess which caused temp directory path issues in tests. Switched to
      direct API calls (createTask/saveTask) which simplified implementation and avoided process
      overhead. Pattern: prefer direct API over subprocess when both run in same codebase."
    created_at: 2026-01-18T17:50:47.483Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:08.526Z
    resolved_by: "@claude"
  - _ulid: 01KF93P7W2A063T315RXPC6ZF7
    type: friction
    content: "Commander --json flag conflict: Command-specific --json flags conflict with global --json
      flag in Commander. Solution: use global flag only, check isJsonMode() instead of options.json.
      This pattern should be documented or enforced via convention."
    created_at: 2026-01-18T17:50:48.706Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:08.975Z
    resolved_by: "@claude"
  - _ulid: 01KF93P8XZK7K9V8ERYYH6FE0Z
    type: friction
    content: "Bash tool cd persistence: Commands run in same directory as previous command unless
      explicit cd. Running 'cd .kspec && git status' left session in .kspec worktree. Need explicit
      'cd /path/to/main' to return. Can be confusing when working with shadow branch."
    created_at: 2026-01-18T17:50:49.792Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:09.402Z
    resolved_by: "@claude"
  - _ulid: 01KF93PA837GGVE8DH3PVZE8WC
    type: friction
    content: "CLI output pattern: When implementing CLI commands with both human-readable and JSON
      formats, use success(message, data) instead of calling both success() and output() separately.
      The success() function already handles JSON mode internally, avoiding duplicate/mixed output."
    created_at: 2026-01-18T17:50:51.140Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:09.731Z
    resolved_by: "@claude"
  - _ulid: 01KF93PBBYDPRH0WQSKN4Y18SV
    type: friction
    content: "Task status accuracy gap: Found task marked as priority 3 ready but implementation was
      already complete. All code, tests, and functionality existed. System correctly updated spec
      alignment when task completed, but task remained in ready list longer than it should have.
      Need earlier alignment checks or better detection of 'code exists but task not marked done'
      scenarios."
    created_at: 2026-01-18T17:50:52.286Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:10.062Z
    resolved_by: "@claude"
  - _ulid: 01KF93PCN5NVFEHR801G77EK3X
    type: friction
    content: "Shadow branch auto-commit PR challenges: PR included WIP commits from shadow that were
      auto-committed. Consider: (1) squash strategy for shadow commits when creating PR, (2)
      explicit checkpoint command before PR creation, or (3) shadow commit message convention (wip:
      prefix) to make cleanup easier."
    created_at: 2026-01-18T17:50:53.606Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:10.411Z
    resolved_by: "@claude"
  - _ulid: 01KF93PDXFBPM2B1WYE6HFYJCX
    type: friction
    content: "PR review automation friction: Had to manually launch review subagent, wait for output,
      interpret results, then fix issues. Could streamline with dedicated /review skill that: (1)
      checks for open PRs, (2) launches review subagent automatically, (3) interprets results +
      decision tree, (4) applies fixes if trivial, (5) merges if appropriate."
    created_at: 2026-01-18T17:50:54.895Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:10.930Z
    resolved_by: "@claude"
  - _ulid: 01KF93Q1Y31HP8245N4DF67MCA
    type: friction
    content: "Auto-sync vs interactive prompts anti-pattern: When adding interactive prompts to modify
      state, always check if automatic sync/calculation logic already exists. AlignmentIndex
      calculates spec status from all linked tasks - interactive prompt would allow single-task
      override, creating drift. Pattern: if system has 'calculated truth', don't add manual override
      without considering multi-entity consistency."
    created_at: 2026-01-18T17:51:15.396Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:11.342Z
    resolved_by: "@claude"
  - _ulid: 01KF93Q2W8DC2RNGG1NA4ABQE0
    type: friction
    content: "Test fixtures spec_ref conflicts: Test fixtures should avoid spec_ref assignments that
      conflict with derive tests. When adding spec_ref to test tasks, check if they're used in
      derive --dry-run tests which expect tasks not to exist yet."
    created_at: 2026-01-18T17:51:16.360Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:11.921Z
    resolved_by: "@claude"
  - _ulid: 01KF93Q4JZ571ZGRTHZ3QXCYJQ
    type: friction
    content: "Parser vs CLI layer disconnect: Meta includes were fully implemented in parser but CLI
      used wrong accessor (metaCtx.manifest.* vs metaCtx.*). This kind of bug suggests value in
      integration tests that exercise full stack, not just parser logic. Consider smoke tests for
      all CLI commands with complex scenarios."
    created_at: 2026-01-18T17:51:18.112Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:12.429Z
    resolved_by: "@claude"
  - _ulid: 01KF93Q6BCQXGTJ7X4FAK13KVT
    type: friction
    content: "Spec gap discovery during implementation: AC mentioned 'origin: observation_promotion' but
      origin field didn't exist in schema. Good example of spec-code drift. Consider:
      pre-implementation spec validation against schema, or schema-first approach where AC
      references must match existing schema fields."
    created_at: 2026-01-18T17:51:19.917Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:13.031Z
    resolved_by: "@claude"
  - _ulid: 01KF93Q83M6RJ0YXH1H2H4F3TK
    type: friction
    content: "kspec-meta shadow branch divergence: Shadow branch has diverged significantly from remote
      (99 local vs 2 remote commits). Merge conflicts in sessions/ and modules/. May need manual
      reconciliation or a fresh sync strategy. Task changes are committed locally and functional."
    created_at: 2026-01-18T17:51:21.717Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:13.557Z
    resolved_by: "@claude"
  - _ulid: 01KF93Q9S85XSBT1JVV1S1F9F3
    type: friction
    content: "Type guards for union types: When narrowing AnyLoadedItem | LoadedMetaItem to LoadedTask,
      check for required properties that exist on Task but not on meta items. Use 'status' in item
      && 'depends_on' in item - NOT optional properties like closed_reason which won't exist on
      incomplete tasks."
    created_at: 2026-01-18T17:51:23.432Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:14.020Z
    resolved_by: "@claude"
  - _ulid: 01KF94EZQT8WP107P6QV9ZC4JD
    type: success
    content: "PR review workflow pattern: Review subagents proved critical for catching issues before
      merge. Established pattern: (1) check for open PRs, (2) launch review subagent, (3) fix
      trivial issues directly, (4) re-review confirms fixes, (5) merge when checks pass. Works
      smoothly when changes are minor - automated review + fix + merge flow is efficient. Multi-step
      workflow (review→fix→merge→continue) provides good session continuity. Review caught real
      issues: reference matching bugs, TypeScript errors, duplicate PRs, missing tests. Self-review
      via subagent is valid for automation loops despite GitHub not allowing self-approval."
    created_at: 2026-01-18T18:04:19.579Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:14.432Z
    resolved_by: "@claude"
  - _ulid: 01KF94F0W0BPTB5RP6FDWH63SM
    type: success
    content: "Incremental refactoring pattern: Large multi-iteration refactors work well when pattern is
      established early. Key lessons: (1) Create module first with comprehensive coverage, (2) Start
      with smallest files to establish pattern, (3) Commit incremental progress with clear 'what
      done/remains' tracking, (4) Use TodoWrite for sub-phases. String/error centralization phases
      showed this: early PRs for small wins, direct commits for established patterns. Tests catch
      issues early, smaller files build confidence. Having checkpoints and running totals (e.g.,
      '179 of 201 = 89%') made continuation easy. This phased approach balances review overhead with
      execution speed."
    created_at: 2026-01-18T18:04:20.737Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:14.851Z
    resolved_by: "@claude"
  - _ulid: 01KF94F20W3MKFPBA1XN0ABQ7P
    type: success
    content: "Implementation pattern (schema→parser→CLI→tests): New features follow clean path. Reuse
      agent command structure (formatTable, formatVerbose, JSON output via output()). Reference
      validation integration is clean - add to REF_FIELDS. Meta reference implementation was
      straightforward thanks to existing ReferenceIndex infrastructure. Pattern of implementing
      formatters first, then command registration works well. Testing is fast and reliable. Module
      add followed same pattern: validate inputs, create data, write file, update manifest, shadow
      commit. Could extract into reusable helper."
    created_at: 2026-01-18T18:04:21.916Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:15.326Z
    resolved_by: "@claude"
  - _ulid: 01KF94FHX7C98EFRCSGAXAKBBR
    type: success
    content: "Reference implementation value: Checking prior work (../kspec-acp-test,
      ../kspec-ralph-test) before implementing saves significant design time. Found identical spec
      and working implementation providing clear blueprint. Prior work avoids edge cases and
      provides consistency. Explore subagents are valuable for understanding prior implementations -
      provided comprehensive details: file paths, schema patterns, CLI structure, test isolation
      challenges. Having parallel agent repos with prior work is highly valuable. Pattern:
      exploration as standard first step for implementation tasks."
    created_at: 2026-01-18T18:04:38.184Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:15.816Z
    resolved_by: "@claude"
  - _ulid: 01KF94FK4G7W86NXDVTAZ77SK8
    type: success
    content: "Task verification workflow: Some ready tasks are already implemented from prior sessions.
      Pattern: when starting task, verify current state by reading code, running tests, checking
      existing functionality before implementing. Saves time and avoids duplicate work. Meta
      commands (resolve, observe, promote, conventions) were already implemented but tasks remained
      pending. Need better sync between implementation status and task status - perhaps command to
      scan for already-implemented specs and auto-complete tasks. Consider 'verify implementation
      status' step especially for CLI commands."
    created_at: 2026-01-18T18:04:39.441Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:16.168Z
    resolved_by: "@claude"
  - _ulid: 01KF94FMF9Y5VCS7EQXP4G2FRJ
    type: success
    content: "Session/workflow patterns: Spike tasks with no code output don't need commits - value is
      in task notes documenting research. Shadow-only changes (task state updates) don't need
      main-branch PRs since shadow branch is source of truth. PR skill correctly detects no changes
      and exits cleanly for metadata-only tasks. PR workflow smooth with auto-generated branch names
      and /pr skill. Shadow CLI verification iteration showed pattern: pick task, verify
      implementation exists, complete task, no code changes needed."
    created_at: 2026-01-18T18:04:40.810Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:16.582Z
    resolved_by: "@claude"
  - _ulid: 01KF94G1HYX2DCY796SKB9XB7P
    type: success
    content: "Task guardrails and completion checks: Feature dogfooded successfully - tested on itself
      during completion. Interactive prompt provides immediate feedback about AC coverage ensuring
      implementations match specs. Implementation preserves spec status.maturity when updating
      implementation status (important pattern to avoid losing maturity context). Default to 'draft'
      if status doesn't exist yet."
    created_at: 2026-01-18T18:04:54.208Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:17.054Z
    resolved_by: "@claude"
  - _ulid: 01KF94G2RY8JAX71K9BC8HJSF7
    type: success
    content: "Context and session integration: Meta focus command implementation straightforward thanks
      to well-structured SessionContext schema and existing loadSessionContext/saveSessionContext
      functions. Pattern of supporting show/set/clear modes in single command is clean and
      user-friendly. Auto-prepending @ to references maintains UX consistency. Context integration
      showed context BEFORE active work for immediate agent orientation - context is 'what thinking
      about' while active tasks are 'what doing'."
    created_at: 2026-01-18T18:04:55.454Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:17.500Z
    resolved_by: "@claude"
  - _ulid: 01KF94G3YV75DYWZENYG19N9NX
    type: success
    content: "Review subagent catches real issues: Found validation strictness issue with RefSchema (too
      strict for manual files), TypeScript compilation errors, import path issues. Demonstrates
      value of code review even for simple changes. Pattern: when review finds flag conflicts or
      behavioral issues, fix includes both code AND spec updates. Renamed --verbose to
      --debug-shadow based on review finding conflict."
    created_at: 2026-01-18T18:04:56.668Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:17.832Z
    resolved_by: "@claude"
  - _ulid: 01KF94GR1RQ0JXWNHD6RQGZ4SE
    type: success
    content: "Schema strictness value: ULID validation strictness caught real bugs - test fixtures had
      24-char ULIDs passing because MetaUlidSchema was too lenient. Fixing schema to use UlidSchema
      forced proper fixture ULIDs. Important pattern: schema strictness prevents silent data
      corruption."
    created_at: 2026-01-18T18:05:17.241Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:18.266Z
    resolved_by: "@claude"
  - _ulid: 01KF94GSM8KQP9QSQK47KT3J7X
    type: success
    content: "JSON output helper pattern: output() provides clean separation between JSON and
      human-readable modes. Used successfully: return observation object in JSON mode, success
      message for human mode. Pattern: output(dataObject, () => humanFormatter()). Avoids
      duplicate/mixed output that happens with separate success() + output() calls."
    created_at: 2026-01-18T18:05:18.857Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:18.669Z
    resolved_by: "@claude"
  - _ulid: 01KF94GV0DY58HXPVZJRQWBBAP
    type: success
    content: "findChildItems path-based hierarchy: Implementation based on _path nesting worked well -
      path structure makes parent-child relationships explicit and easy to query. Similar pattern
      could be useful for other hierarchical queries: siblings, ancestors, tree depth."
    created_at: 2026-01-18T18:05:20.270Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:19.089Z
    resolved_by: "@claude"
  - _ulid: 01KF94GWFGAHGPNM9HNCCESTSC
    type: success
    content: "Commander introspection for help: Commander's structure is stable and well-defined, making
      it reliable source of truth for help output. Consider applying to other CLI frameworks (Oclif,
      yargs). Separation of auto-generated syntax vs curated concepts is clean and maintainable."
    created_at: 2026-01-18T18:05:21.777Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:19.568Z
    resolved_by: "@claude"
  - _ulid: 01KF94GXWR0CDRDG5GJ898XR24
    type: success
    content: "Command suggestion with Levenshtein: Feature implemented cleanly using Levenshtein
      distance. Threshold of 3 works well for catching typos without false positives. Commander.js
      already handles subcommand suggestions, so only needed top-level command handling."
    created_at: 2026-01-18T18:05:23.225Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:19.960Z
    resolved_by: "@claude"
  - _ulid: 01KF94HCFSAD6WJ4PJG1T0SSY1
    type: success
    content: "Validation architecture scales: Adding warnings alongside errors required minimal changes
      - new type, updated return structure, simple CLI formatting. Separation of concerns (refs.ts
      for logic, validate.ts for orchestration, validate CLI for display) made enhancement
      straightforward. Pattern worth replicating: warnings as first-class citizens alongside
      errors."
    created_at: 2026-01-18T18:05:38.169Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:20.309Z
    resolved_by: "@claude"
  - _ulid: 01KF94HDYHTGCMZCC6MMFYJGNJ
    type: success
    content: "Spike workflow refinement: When completing spike, capture recommendation in closed_reason
      (brief) + final note (detailed). Spike task notes form mini research doc. Pattern: findings →
      analysis → recommendation. Example: task-archive spike documented current system, reviewed
      references, recommended MVP approach all in notes."
    created_at: 2026-01-18T18:05:39.666Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:20.795Z
    resolved_by: "@claude"
  - _ulid: 01KF94HFCXHSBAYMYXVTKRV3T8
    type: success
    content: "Convention validation foundation: Implementation validates convention schema. To be fully
      functional needs integration with actual content sources (git log for commits, task notes for
      note validation, etc.). Foundation is complete, content gathering is future enhancement."
    created_at: 2026-01-18T18:05:41.150Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:21.247Z
    resolved_by: "@claude"
  - _ulid: 01KF94HGRMD0BF4524V3KQ8V2Q
    type: success
    content: "Task origin field tracking: Added origin enum to track task creation source (manual,
      derived, observation_promotion). Could be extended for other sources like 'agent_suggestion',
      'test_failure', 'lint_error'. Useful for metrics and understanding task flow."
    created_at: 2026-01-18T18:05:42.548Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:21.698Z
    resolved_by: "@claude"
  - _ulid: 01KF96T3VVQ8CTXQYQ4XNMTQ1W
    type: question
    content: "Shadow branch PR workflow clarification: When work only updates shadow branch (.kspec/)
      metadata - task state, inbox items, notes - should PRs still be created? Ralph instructions
      say 'create PR after commit' but this seems intended for code changes on feature branches.
      Shadow changes track the work; code changes are the work output. Current behavior: skip PR
      when working tree is clean. Need clarification on whether meta manifest changes should follow
      different review process than code changes."
    created_at: 2026-01-18T18:45:21.404Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:22.131Z
    resolved_by: "@claude"
  - _ulid: 01KF96T6E67ZB7FVJ8JEDBKTYS
    type: success
    content: "Iteration workflow patterns: (1) Verification-only iterations produce no commits -
      efficient, avoids code churn, skipping PR is correct when working tree clean. (2)
      Implementation vs verification task distinction - verification tasks are quick wins for
      automation loops, implementation tasks need focused sessions. (3) Iteration findings show
      shadow branch is source of truth for task state (git status on main shows clean after adding
      inbox items), session context can be stale. Pattern: prioritize verification in loops, save
      implementation for context-rich sessions."
    created_at: 2026-01-18T18:45:24.039Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:22.610Z
    resolved_by: "@claude"
  - _ulid: 01KF96TKTHJ8DNBGCTR8ACQ7DN
    type: success
    content: "PR review momentum: When reviewing own PRs from previous iterations, fix trivial issues
      directly (like invalid ULIDs) rather than leaving comments. Merge when checks pass unless
      changes are substantial. This keeps momentum going in automation loops."
    created_at: 2026-01-18T18:45:37.746Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:23.094Z
    resolved_by: "@claude"
  - _ulid: 01KF96TN2JQ4PPH7MW0G42MXBT
    type: success
    content: "CLI label centralization: item.ts and inbox.ts had drifted from established
      src/strings/labels.ts pattern. Quick grep audit found inconsistencies. Fix was
      straightforward: import centralized labels and replace hardcoded strings. Pattern prevents
      drift: new commands should import from strings/ from the start."
    created_at: 2026-01-18T18:45:39.027Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:23.455Z
    resolved_by: "@claude"
  - _ulid: 01KF96TPK7BTRZ1XZ9BK5YD6G8
    type: success
    content: "Reference directory exploration: For spikes, launching dedicated Explore subagent for
      reference dirs (kspec-acp-test, kspec-ralph-test) prevents context bloat while getting
      comprehensive findings. Subagent found identical spec content across both test dirs. Pattern
      worked well - consider for other research tasks."
    created_at: 2026-01-18T18:45:40.584Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:23.878Z
    resolved_by: "@claude"
  - _ulid: 01KF96TQV69YX5RQKAJQDQ1S25
    type: success
    content: "Shadow CLI verification: Picked task from ready list, found all three commands (status,
      log, repair) already implemented with 43 passing tests. Verified functionality, completed
      task, updated spec alignment. No code changes needed. Key learning: spec items marked
      'implemented' were accurate."
    created_at: 2026-01-18T18:45:41.863Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:24.454Z
    resolved_by: "@claude"
  - _ulid: 01KF96V5J1QJR44K8M7MMGFS0M
    type: success
    content: "Meta schema verification batch: Completed 8 meta-related tasks in single iteration by
      verifying existing schema implementations in src/schema/meta.ts. Pattern: start task, read
      schema file, verify fields match spec, document in notes, complete. Efficient for verification
      tasks when implementation already exists."
    created_at: 2026-01-18T18:45:55.906Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:24.860Z
    resolved_by: "@claude"
  - _ulid: 01KF96V6MZKAJC86KJD949CW8P
    type: success
    content: "Display-first implementation strategy: Many derived tasks for meta-spec features were
      already implemented. Schema layer and CLI display commands (meta show, meta agents, etc.) are
      complete. Gap is in interactive/mutation commands and validation integration. Pattern:
      display-first is pragmatic - read operations complete, write operations deferred. Allows early
      testing of schema design."
    created_at: 2026-01-18T18:45:57.023Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:25.443Z
    resolved_by: "@claude"
  - _ulid: 01KF96V82FAJANHX3P5GWEH8HQ
    type: success
    content: "Convention schema test gap: Schema was already implemented but lacked test coverage. When
      picking up implementation tasks, check if code exists first - may just need tests or
      documentation rather than new code. Tests added brought coverage up to spec."
    created_at: 2026-01-18T18:45:58.480Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:25.758Z
    resolved_by: "@claude"
  - _ulid: 01KF96V9DF3FX5XH224TM996TE
    type: success
    content: "Session checkpoint hook value: Hook caught uncommitted .gitignore change. Important to
      follow never-commit-to-main rule - all changes should go through PRs. Hook successfully
      prevented incomplete session state."
    created_at: 2026-01-18T18:45:59.857Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:26.087Z
    resolved_by: "@claude"
  - _ulid: 01KF9WR7HTSHYCHSFKYFG31JSJ
    type: success
    content: Parallel exploration agents gave comprehensive context quickly for documentation audit
    created_at: 2026-01-19T01:08:48.314Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:26.540Z
    resolved_by: "@claude"
  - _ulid: 01KF9ZFAGH35RQG6J9BA20TM6E
    type: success
    content: "Ralph loop iteration 1 completed successfully: merged PR #58 (meta thread), implemented
      and shipped meta question command as PR #63. Pattern replication from existing code (meta
      thread) worked perfectly - implementation and tests completed in single iteration with all
      tests passing."
    created_at: 2026-01-19T01:56:22.161Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:27.048Z
    resolved_by: "@claude"
  - _ulid: 01KFA0DVCMDFM7QFDJQ2ZCY21G
    type: success
    content: "Task descriptions with clear problem statements enable fast resolution - the ralph newline
      issue had a detailed description that made the fix obvious: just move console.log() before
      success() call. Spent <5 min from task start to fix complete."
    created_at: 2026-01-19T02:13:02.485Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:27.570Z
    resolved_by: "@claude"
  - _ulid: 01KFA0S3X005NWJY3D8931BGP5
    type: success
    content: "Hook debugging methodology: For hook errors, test with synthetic inputs (valid JSON,
      invalid JSON, edge cases) to isolate root cause before fixing. The '2>&1' pattern in test
      commands reveals stderr leakage that wouldn't be visible in normal hook execution."
    created_at: 2026-01-19T02:19:11.648Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:28.048Z
    resolved_by: "@claude"
  - _ulid: 01KFA0WGSE81VFMN080ARJEQHG
    type: success
    content: "Task verification pattern successful: Check git history for related commits before
      implementing. Task @01KF9B4W was already completed in ff935fd - verification took <2 minutes,
      saved duplicate work."
    created_at: 2026-01-19T02:21:03.150Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:28.565Z
    resolved_by: "@claude"
  - _ulid: 01KFA17QWT1KQJGG4J8E6ZT6AZ
    type: success
    content: Clear task scope led to clean implementation - 'ralph loop session save' was well-defined
      with obvious file naming (context-iter-N.json) and storage location (.kspec/sessions/{id}/).
      No ambiguity about what to build or where to put it. Good example of actionable task with
      minimal design decisions needed.
    created_at: 2026-01-19T02:27:10.874Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:28.966Z
    resolved_by: "@claude"
  - _ulid: 01KFA1T2TD09TXAD8KHNAB0JFJ
    type: success
    content: Comprehensive design work captured entirely in task notes - created detailed analysis of
      agent-first CLI improvements with 5 key areas, phased implementation plan, and 5 follow-up
      inbox items. This design-in-notes pattern works well for planning tasks that inform future
      spec creation.
    created_at: 2026-01-19T02:37:11.885Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:29.515Z
    resolved_by: "@claude"
  - _ulid: 01KFA1T7F256DV5H7W73GG1V3C
    type: friction
    content: Shadow branch worktree was missing at iteration start - required manual 'git worktree add
      .kspec kspec-meta' then 'kspec shadow repair' to restore. This may be an environment issue
      (worktree cleanup?) or session isolation problem. Worth investigating why .kspec worktree
      disappeared between iterations.
    created_at: 2026-01-19T02:37:16.642Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:30.005Z
    resolved_by: "@claude"
  - _ulid: 01KFA2BWD2KC305W3SBDYQR2DH
    type: success
    content: "Minimal viable implementation pattern works well: Started with complex task (subagent
      review workflow), scoped down to core value (review context command), shipped working feature
      in single iteration. Command provides immediate value for manual use while leaving door open
      for automation later. Design-first approach (notes documenting decisions) helped keep scope
      manageable."
    created_at: 2026-01-19T02:46:55.139Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:30.439Z
    resolved_by: "@claude"
  - _ulid: 01KFA32BJBH3D2HY6ACYNJBNWA
    type: success
    content: PR review subagent workflow worked effectively - launched dedicated review agent,
      identified missing test coverage and type safety issues, implemented fixes, verified all tests
      pass (555/556), merged with proper trailers. Review-fix-merge cycle completed in single
      iteration.
    created_at: 2026-01-19T02:59:11.564Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:30.782Z
    resolved_by: "@claude"
  - _ulid: 01KFA380DVCVJT84GA2XNBRWY0
    type: success
    content: Documentation-focused task worked well with todo tracking - broke down 5 documentation
      updates into clear steps, executed systematically, verified commands against CLI, completed
      all updates in single iteration with comprehensive commit message
    created_at: 2026-01-19T03:02:16.764Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:31.185Z
    resolved_by: "@claude"
  - _ulid: 01KFA3SBMD2507GB1TYZTN8G8R
    type: success
    content: Smooth workflow on implementing kspec meta context - spec was clear, implementation
      straightforward, comprehensive test coverage added, all tests pass. The meta command family
      now has a unified context view that complements the individual management commands (focus,
      thread, question).
    created_at: 2026-01-19T03:11:45.294Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:31.619Z
    resolved_by: "@claude"
  - _ulid: 01KFA4RFT8D2T2SW95A8ZK1JZE
    type: success
    content: Shadow branch auto-commit workflow is seamless - created 5 spec items with ACs, all
      automatically committed without manual intervention. Task completion tracked properly across
      worktrees.
    created_at: 2026-01-19T03:28:45.385Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:32.212Z
    resolved_by: "@claude"
  - _ulid: 01KFA4Y20RN7W6ZMG7ZNE1VE3E
    type: success
    content: "ACs discovery pattern: Reading implementation code + corresponding tests provides complete
      picture of behaviors that need acceptance criteria. For @status-cascade, found 5 distinct
      behaviors (prompt shown, cascade accepted, cascade rejected, JSON mode, no children) by
      examining handleStatusCascade function and integration tests."
    created_at: 2026-01-19T03:31:47.864Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:32.655Z
    resolved_by: "@claude"
  - _ulid: 01KFA599DH7QAR73HRWZMMWR5Z
    type: success
    content: "Efficient workflow iteration: picked task, analyzed code (Read tool), identified root
      cause (syncSpecImplementationStatus saves but doesn't commit), implemented minimal fix (2
      identical changes in start/complete), verified with tests (561/561 pass), committed and
      created PR. Single-focus iteration completed in ~10 minutes of work."
    created_at: 2026-01-19T03:37:55.889Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:33.151Z
    resolved_by: "@claude"
  - _ulid: 01KFA63VXRCMDNFNEVSNNHQ71M
    type: success
    content: Tree view implementation was straightforward - used existing findChildItems pattern and
      _path property to build hierarchy. The box-drawing character approach (├──, └──, │) provides
      clear visual structure without complex dependencies. Integration with existing filters worked
      seamlessly because tree formatting happens at display layer, not query layer.
    created_at: 2026-01-19T03:52:26.808Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:33.546Z
    resolved_by: "@claude"
  - _ulid: 01KFA6WBT1A8WRNQ4F7NM2KAFX
    type: success
    content: "PR workflow smooth - auto-generated branch name from task slug
      (feat/add-priority-flag-to-derive), created branch from main with unpushed commit, reset main,
      pushed branch, created PR. The pattern of: checkout -b new-branch && git checkout main && git
      reset --hard origin/main && git checkout new-branch works cleanly for moving commits from main
      to a new branch."
    created_at: 2026-01-19T04:05:49.505Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:34.020Z
    resolved_by: "@claude"
  - _ulid: 01KFA8C874AX1X3SDB2BZWC6AE
    type: success
    content: "Task start spec context feature - clean DX improvement that follows existing patterns.
      Pattern: show context at point of action (when starting work), suppress in JSON mode, add test
      coverage with real fixtures. The alignment guidance string pattern in src/strings/guidance.ts
      is effective for maintaining consistent agent messaging."
    created_at: 2026-01-19T04:31:58.693Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:34.442Z
    resolved_by: "@claude"
  - _ulid: 01KFA9KJ13NES8R3R26QESDS02
    type: success
    content: "Test coverage tracking implementation demonstrates good separation of concerns -
      validation logic in parser/validate.ts, display logic in CLI commands. The AC annotation
      pattern (// AC: @spec-ref ac-N) provides simple traceability without complex tooling.
      Duplicating scanTestCoverage in task.ts is acceptable given the focused use case, though could
      be extracted to utils if pattern grows."
    created_at: 2026-01-19T04:53:26.691Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:34.910Z
    resolved_by: "@claude"
  - _ulid: 01KFA9N9FMZCAJAQNE97K479RF
    type: friction
    content: "Task state management across sessions: found task @01KF9G2X left in_progress from previous
      iteration. No built-in command to reset task to pending - only cancel (which marks it
      cancelled) or complete. Added note documenting state, but task remains in_progress. Consider
      adding 'kspec task reset' or 'kspec task stop' command to move tasks back to pending when
      abandoned mid-work."
    created_at: 2026-01-19T04:54:23.476Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:35.387Z
    resolved_by: "@claude"
  - _ulid: 01KFAA0XW7PHR9EWXEP3HR1HR7
    type: success
    content: "Iteration 16 handled two tasks effectively: completed test coverage tracking (my primary
      work) and discovered/completed abandoned WIP for spec item notes (3 WIP commits from previous
      session). The spec item notes feature was nearly complete - just needed commits. This
      demonstrates good cross-session continuity when WIP is properly committed with clear
      messages."
    created_at: 2026-01-19T05:00:44.808Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:35.760Z
    resolved_by: "@claude"
  - _ulid: 01KFAAC1AYM45CE8B8MDWGJ4GW
    type: success
    content: Reusing NoteSchema across both tasks and spec items worked perfectly - no code duplication,
      consistent behavior, and symmetric CLI commands. The pattern of import { NoteSchema } from
      './task.js' into spec.ts demonstrates good schema reuse.
    created_at: 2026-01-19T05:06:48.798Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:36.184Z
    resolved_by: "@claude"
  - _ulid: 01KFABRSMHWD0Q33800AX7TYSS
    type: success
    content: "PR review workflow worked well: subagent found TypeScript compilation errors (missing
      imports), implemented fix directly on feature branch, verified with tests, then merged. Clean
      separation between review agent and implementation agent."
    created_at: 2026-01-19T05:31:15.473Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:36.709Z
    resolved_by: "@claude"
  - _ulid: 01KFABRY971XP4KD8D3198R2KT
    type: success
    content: "Spec-first workflow for schema changes: Updated @maturity-states spec with new 'deferred'
      status and added ACs before implementing in schema. This ensures spec remains source of truth
      and provides clear acceptance criteria for implementation."
    created_at: 2026-01-19T05:31:20.231Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:37.258Z
    resolved_by: "@claude"
  - _ulid: 01KFADNW4SYG78Y13M8KHXAR92
    type: success
    content: Auto-generating implementation notes from specs during derive significantly streamlines the
      spec-first workflow. Rather than requiring manual 'kspec task note' after derive, the context
      is automatically captured. This reduces cognitive load and ensures implementation context
      isn't lost. The pattern of using spec description + AC summary provides exactly the right
      level of detail for implementation reference.
    created_at: 2026-01-19T06:04:36.889Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:37.742Z
    resolved_by: "@claude"
  - _ulid: 01KFADRNQN3SG8FMZF3EMWHF6N
    type: success
    content: "INSTALL.md creation went smoothly - clear task description made it easy to know what to
      write. Agent-focused documentation should always have: concise commands, copy-pasteable
      snippets, clear success criteria after each section, troubleshooting for common gotchas."
    created_at: 2026-01-19T06:06:08.629Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:38.272Z
    resolved_by: "@claude"
  - _ulid: 01KFAEFD4XYVVXH61FNA9HWHGT
    type: success
    content: "PR review workflow with subagent worked smoothly. The review subagent provided detailed
      analysis covering code quality, test coverage, task/spec alignment, and commit conventions.
      Decision tree in RALPH_LOOP_INSTRUCTIONS.md made merge decision clear. Merged PR #75, then
      picked next task and completed docs work. Clean iteration from review → merge → new work →
      PR."
    created_at: 2026-01-19T06:18:33.501Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:38.692Z
    resolved_by: "@claude"
  - _ulid: 01KFAF48W58CCFZBC0DBGCCK21
    type: success
    content: Git worktrees use hooks from main .git/hooks (via commondir), not from
      .git/worktrees/-kspec/hooks. This is a key architectural detail that wasn't obvious from git
      documentation. Testing revealed the issue when hooks weren't being called. The commondir file
      points to '../..' which makes git look for hooks in the main repo.
    created_at: 2026-01-19T06:29:57.253Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:39.120Z
    resolved_by: "@claude"
  - _ulid: 01KFAFEAADJPTN5ZRHK0PDYGJY
    type: success
    content: "Small DX improvements (like setup:dev script) have high impact for low effort. Pattern:
      when you find yourself documenting a multi-step setup process, consider if it can be a single
      script instead."
    created_at: 2026-01-19T06:35:26.413Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:39.559Z
    resolved_by: "@claude"
  - _ulid: 01KFAGYE5VYH1YSNS7ZD4R20BX
    type: friction
    content: "Shadow branch worktree repair workflow issues: (1) Nested .kspec/.kspec directories
      created by repeated git worktree add commands, (2) Commands that navigate into .kspec (cd
      .kspec && ...) fail when already in subdirectory, causing directory confusion, (3) Git
      worktree metadata (/.git/worktrees) can become desynchronized from actual directory state, (4)
      kspec shadow repair command failed with 'spawn /bin/sh ENOENT' error. Resolution required:
      manual git worktree prune, removal of nested directories, and manual git operations in
      worktree with KSPEC_SHADOW_COMMIT=1 to bypass hook. Consider: (a) More robust worktree repair
      that handles nested directories, (b) Better error messages showing current directory context,
      (c) Idempotent repair commands that check current state before operations."
    created_at: 2026-01-19T07:01:43.227Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:40.049Z
    resolved_by: "@claude"
  - _ulid: 01KFAH2B2H0P3ZZRXMKY7F35BV
    type: success
    content: "Completed full task cycle in iteration 25: merged open PR, resolved shadow branch sync
      issues, picked and completed task @01KFAB9B, committed work, created PR #80. The worktree
      friction observation captured detailed troubleshooting context for future improvements. Task
      completion workflow worked smoothly once shadow branch was synchronized."
    created_at: 2026-01-19T07:03:51.122Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:40.632Z
    resolved_by: "@claude"
  - _ulid: 01KFAHKB1REKZMA6EP9HM7J1FZ
    type: success
    content: "Integration test strategy: Using command JSON output directly from promote command instead
      of querying tasks list afterward provides more accurate, focused tests and avoids format
      parsing issues. The promote command returns the created task in its JSON output, which is
      exactly what we need to verify."
    created_at: 2026-01-19T07:13:08.152Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:41.043Z
    resolved_by: "@claude"
  - _ulid: 01KFAJSS392ZV47Z373HK29HAM
    type: success
    content: "Batch operation pattern scales well - created reusable executeBatchOperation() utility
      that handles all common concerns (mutual exclusion, partial failures, output formatting).
      Applied to 3 commands (complete, cancel, delete) with minimal duplication. Pattern: extract
      single-item logic into executeOperation callback, utility handles iteration/error collection.
      Makes adding batch support to new commands straightforward."
    created_at: 2026-01-19T07:34:07.722Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:41.409Z
    resolved_by: "@claude"
  - _ulid: 01KFAM6VF2MY7QKC526SZX8PY8
    type: success
    content: |-
      Test-first debugging pattern worked excellently for batch operations

      The PR review subagent identified a critical bug: resolveTaskRef() called process.exit() 
      instead of returning errors, breaking partial failure handling.

      The fix process was clean:
      1. Review identified the bug with clear evidence
      2. Created batch-compatible resolver that returns {task, error}
      3. Updated batch.ts to expect new format
      4. All existing tests passed (no regression)
      5. Added 9 new tests covering all 8 ACs
      6. Tests caught edge cases (ambiguous ULID prefixes)

      Key insight: When refactoring error handling, create new functions instead of modifying
      existing ones. The original resolveTaskRef() serves single-ref commands that should exit
      on error. The new resolveTaskRefForBatch() serves batch commands that should continue.

      This separation of concerns made the fix safe and testable.
    created_at: 2026-01-19T07:58:44.706Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:41.783Z
    resolved_by: "@claude"
  - _ulid: 01KFANADZJA4VAFBSH0F8FAWXP
    type: friction
    content: Test observation from Ralph Loop
    created_at: 2026-01-19T08:18:10.546Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:42.284Z
    resolved_by: "@claude"
  - _ulid: 01KFAND9RY95MCTPE02QB9103E
    type: success
    content: "Iteration 29 workflow was efficient and clean: picked highest priority task, implemented
      feature with comprehensive tests (5 tests covering all AC), manual testing verified
      functionality, PR created. The --from-inbox flag for meta observe enables bucket correction
      during triage - items captured in wrong bucket can be easily converted."
    created_at: 2026-01-19T08:19:44.542Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:42.833Z
    resolved_by: "@claude"
  - _ulid: 01KFAPKVHCJGKTVM1690P8P8CF
    type: success
    content: Passthrough args implementation pattern - When adding passthrough args to CLI commands that
      normally parse output, create separate raw output path. Trying to parse structured output with
      custom format flags breaks. Used searchCommitsRaw() for raw git output when
      passthroughArgs.length > 0, avoiding format conflicts.
    created_at: 2026-01-19T08:40:47.917Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:43.177Z
    resolved_by: "@claude"
  - _ulid: 01KFAPWQVB7K0DV4ZK6TDRJMM2
    type: success
    content: PR review and merge workflow worked smoothly. Dedicated review subagent provided
      comprehensive analysis covering code quality, test coverage, and spec alignment. Clear APPROVE
      recommendation made merge decision straightforward. This validates the review-before-merge
      pattern in RALPH_LOOP_INSTRUCTIONS.
    created_at: 2026-01-19T08:45:39.051Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:43.493Z
    resolved_by: "@claude"
  - _ulid: 01KFAQN66S95434T70FPXES77X
    type: success
    content: Implemented kspec setup worktree detection cleanly by leveraging existing shadow module
      utilities. The repairShadow() function already handled the complex worktree creation logic, so
      implementation was primarily about adding the detection and prompting layer. This demonstrates
      the value of the shadow module's well-factored utilities for worktree management.
    created_at: 2026-01-19T08:59:00.185Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:43.850Z
    resolved_by: "@claude"
  - _ulid: 01KFARJ6TDYJFKS5EP5XAJB89W
    type: success
    content: "Bulk refactoring pattern: Created automated script to replace magic numbers with constants
      across 18+ files. This approach was much faster than manual edits and ensured consistency. The
      script handled the mechanical replacements, then manual fixes addressed edge cases (import
      paths). This pattern is reusable for similar bulk refactoring tasks (e.g., error message
      standardization, import path updates)."
    created_at: 2026-01-19T09:14:51.085Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:44.386Z
    resolved_by: "@claude"
  - _ulid: 01KFATCXG9439H99JN0KK8SV71
    type: success
    content: "Multi-round PR review with dedicated subagents worked extremely well. Pattern: (1) Launch
      review subagent after PR created (2) Review finds issues (3) Fix issues (4) Launch new review
      subagent (5) Repeat until clean (6) Merge. This approach caught all CONFLICT exit code
      inconsistencies through 3 fix iterations before merge. The independent review prevented
      merging incomplete work. Key: each review cycle provides fresh perspective and catches missed
      cases."
    created_at: 2026-01-19T09:46:54.857Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:44.886Z
    resolved_by: "@claude"
  - _ulid: 01KFATQ46A835BQ657YX7AC853
    type: success
    content: "Implementing features with clear acceptance criteria is much faster than without. The
      @stale-status-detection spec had 5 well-defined ACs that mapped directly to implementation
      steps. AC format (Given/When/Then) made it easy to verify each scenario. Spent more time
      fixing type issues than implementing logic. Key learning: read schema thoroughly first to
      understand data structures before writing validation logic."
    created_at: 2026-01-19T09:52:29.386Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:45.251Z
    resolved_by: "@claude"
  - _ulid: 01KFATS86AMESWQJA9E1T2JCVM
    type: success
    content: "Staleness detection implementation completed successfully. The feature detects status
      inconsistencies between specs and tasks, with 3 key checks: task dependencies completed but
      task pending, spec implemented without tasks, and task completed but spec not started. All
      tests pass."
    created_at: 2026-01-19T09:53:39.018Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:45.817Z
    resolved_by: "@claude"
  - _ulid: 01KFATSF5A7KEEY4CHSKTCFG4G
    type: friction
    content: "Found task in progress but work already committed. This may happen when: (1) previous
      iteration completed but didn't mark task complete, (2) concurrent work from another process,
      or (3) git operations completed before kspec state sync. Consider adding 'kspec shadow sync'
      at session start to ensure state is current."
    created_at: 2026-01-19T09:53:46.155Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:46.180Z
    resolved_by: "@claude"
  - _ulid: 01KFATSKF22KHRZYCQ0TJP1P1E
    type: success
    content: "Complete iteration workflow: (1) Check open PRs and review/merge, (2) Pick highest
      priority ready task, (3) Implement with clear ACs, (4) Manual test verification, (5) Commit
      with task/spec trailers, (6) Create PR. This pattern ensures no work is left in limbo - PRs
      are either merged or created by end of iteration. The /pr skill makes PR creation seamless."
    created_at: 2026-01-19T09:53:50.562Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:46.720Z
    resolved_by: "@claude"
  - _ulid: 01KFATTDS4G9VHDXXF4DDHS1C2
    type: success
    content: "Iteration 34 outcome: Merged 1 PR (semantic exit codes with 4 commits), implemented and
      shipped stale status detection (3 commits, PR #88 created). Multi-round review pattern
      prevented incomplete merges. Every iteration should end with either merged PRs or new PRs
      created - no work left uncommitted or unpushed. This keeps the project moving forward
      consistently."
    created_at: 2026-01-19T09:54:17.508Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:47.283Z
    resolved_by: "@claude"
  - _ulid: 01KFAVMTHF0KRC1YKH8QMF1W9W
    type: friction
    content: "Global --json mode interactions complicate command-specific JSON output. Commands that
      want to output simple JSON (like {path, branch}) end up wrapped in {success, ...} objects or
      interfere with git stderr. Consider: (1) per-command JSON output control, (2) dedicated JSON
      output stream, or (3) convention that commands bypass global mode for simple output."
    created_at: 2026-01-19T10:08:42.543Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:47.870Z
    resolved_by: "@claude"
  - _ulid: 01KFAVYRDBQYJEAK4Z8E5QMQXA
    type: friction
    content: Task was cancelled prematurely by automation (01KEZ9DSD3). The automation cancelled the
      task after initial investigation notes, but actual implementation work was completed
      successfully. The code changes were made and tested, but the task was marked as cancelled
      before completion could be recorded. This suggests the automation may be too aggressive in
      cancelling tasks that appear to be in research/investigation phase.
    created_at: 2026-01-19T10:14:08.043Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:48.302Z
    resolved_by: "@claude"
  - _ulid: 01KFAVYYD7GKN0VXBP67B4CR8G
    type: success
    content: Successfully improved YAML formatting consistency by switching from js-yaml to modern
      'yaml' library. The new implementation provides deterministic formatting that won't randomly
      change between saves, addressing the core DX issue. While not preserving exact original
      formatting/comments, this is a pragmatic solution that significantly improves the developer
      experience without requiring complex CST manipulation.
    created_at: 2026-01-19T10:14:14.183Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:48.734Z
    resolved_by: "@claude"
  - _ulid: 01KFAY1AB5CT6KEJ2J9NY37WQX
    type: success
    content: "Complete YAML library migration completed successfully. Initial implementation had
      critical bug (timestamps round-tripping as Date objects), but review subagent caught it before
      merge. Fixed by migrating both read and write operations to yaml library. PR reviewed, fixed,
      and merged in same iteration. This demonstrates the value of: (1) Launching review subagents
      for own PRs, (2) Acting on review feedback immediately, (3) Complete testing before declaring
      done."
    created_at: 2026-01-19T10:50:29.093Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:49.163Z
    resolved_by: "@claude"
  - _ulid: 01KFAY1FS7QHBMV350A899878F
    type: friction
    content: Task automation cancelled 01KEZ9DSD3 prematurely during investigation phase, but work was
      actually completed. The automation should be more lenient with tasks in early
      research/investigation phases, or have a way to detect when implementation is actually
      progressing even if lots of notes are being added.
    created_at: 2026-01-19T10:50:34.663Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:49.658Z
    resolved_by: "@claude"
  - _ulid: 01KFAY281BQT8BGFP3YRF6SYXF
    type: success
    content: "Full iteration workflow executed successfully: Task pickup → Implementation → PR creation
      → Review subagent finds bug → Fix implementation → Re-review → Merge. The review-before-merge
      workflow prevented a production bug. Total time: ~40 minutes for complete feature delivery
      including bug fix."
    created_at: 2026-01-19T10:50:59.500Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:50.042Z
    resolved_by: "@claude"
  - _ulid: 01KFAY7NM46JVAJ0JAKEDHAH0C
    type: success
    content: "Research spikes captured in task notes provide durable artifacts. Task 01KF9G22
      demonstrates pattern: comprehensive research findings documented directly in notes, preserving
      context even when temporary files (scratchpad) don't persist. Notes become the source of truth
      for future spec/task creation."
    created_at: 2026-01-19T10:53:57.252Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:50.446Z
    resolved_by: "@claude"
  - _ulid: 01KFAY7ZXQ0P119X3S9N42KZVW
    type: friction
    content: "Task 01KF9G22 was cancelled in previous iteration but appeared in ready_tasks list. When
      attempted to complete after adding research notes, got error 'Cannot complete task with
      status: cancelled'. The ready_tasks filter should exclude cancelled tasks, or there should be
      a way to reopen/uncancell tasks that get picked up again."
    created_at: 2026-01-19T10:54:07.799Z
    author: "@claude"
    resolved: true
    resolution: Reviewed in retrospective - actionable items extracted to tasks, patterns retained as reference
    resolved_at: 2026-01-19T16:12:50.887Z
    resolved_by: "@claude"
  - _ulid: 01KFC3BCB8B8F2GXW0GGNCNRT4
    type: question
    content: "Bulk import design question: What makes it 'work well'? The cancelled @task-bulk-import
      had a design for simplified YAML input. Challenges identified: format flexibility vs
      strictness, error handling mid-import, preview accuracy, integration with existing workflows.
      What's the core use case - rapid spec capture during design? Plan-to-spec translation?
      Importing from external sources?"
    created_at: 2026-01-19T21:42:36.136Z
    author: "@claude"
    resolved: true
    resolution: "Resolved via batch JSON approach: Generic kspec batch command accepts JSON array of CLI
      args. Skills handle translation from flexible input to batch JSON. See inbox 01KFC3SV."
    resolved_at: 2026-01-19T21:50:38.514Z
    resolved_by: "@claude"
  - _ulid: 01KFC3BM2YJSZ56MFSS8MA8WM6
    type: friction
    content: "Plan mode required multiple back-and-forth cycles. Missing upfront: output type (spec vs
      code), standalone requirements check, display/UX needs. Review subagent ran AFTER trying to
      exit plan mode instead of as a step before finalizing. Suggests plan mode needs structured
      phases or checklist."
    created_at: 2026-01-19T21:42:44.062Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFC3BVA0WNT6FV2B74DY270A
    type: success
    content: "Subagent review of spec caught 3 blocking issues (AC collision, undefined JSON structure,
      display contradiction) that would have caused implementation problems. Pattern: review specs
      with critical eye before finalizing, not just for completeness but for internal consistency
      and edge cases."
    created_at: 2026-01-19T21:42:51.457Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFC3C23Q4DX7APJEXFEKY1FN
    type: success
    content: "Task notes template for standalone implementation context worked well: Scope (what this
      task covers), Prerequisites (dependencies), Files (to modify/create), Patterns (code
      examples), Tests (where to add). Prevents 'see parent for context' band-aids."
    created_at: 2026-01-19T21:42:58.423Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCPF1T45VEVDP6PHNY9D6SC
    type: success
    content: Exit code fixes completed efficiently using TodoWrite to track all 6 individual changes.
      The todo list helped ensure no fixes were missed and provided clear progress visibility
      through the task.
    created_at: 2026-01-20T03:16:39.364Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCQ0SQ1RJ3HTD5FBE2N90RA
    type: success
    content: "PR workflow (#96 → #97) demonstrates smooth iteration loop: review existing PR → merge →
      pick next task → implement → submit → create PR. The pending_review state effectively gates
      work and ensures each PR gets proper review before merge. Task @01KFC1GKG scope was
      well-defined (foundation only) which made it easy to complete in one iteration."
    created_at: 2026-01-20T03:26:20.898Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCQZKW4NF7Z3BA49P9NGQHF
    type: success
    content: PR review workflow with dedicated subagent worked well - caught missing test coverage
      before merge. Strict review guidelines (AC coverage required, no fluff tests, E2E preferred)
      ensure quality standards are maintained across iterations.
    created_at: 2026-01-20T03:43:10.724Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCR87QM94J4S6CKYCV9Z1B3
    type: success
    content: "YAML migration task was straightforward - clear scope, no dependencies, simple
      find-replace pattern. This type of refactoring task is ideal for automation: well-defined
      changes, easy to verify with tests, low risk."
    created_at: 2026-01-20T03:47:53.205Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCS35ZYSCC5209668HWBZDA
    type: success
    content: "Test-first debugging workflow effective: Added debug output to failing tests to identify
      root cause (invalid ULID format), then fixed and removed debug code. Faster than guessing."
    created_at: 2026-01-20T04:02:36.159Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCSQFV6TA8SM8ZPKNVHK09T
    type: success
    content: Traits field validation implementation followed clean pattern from existing ref validation.
      Adding to REF_FIELDS array and extending validateRefs() was straightforward. The test pattern
      from parser.test.ts made writing comprehensive tests easy. All 5 ACs covered in 6 tests.
    created_at: 2026-01-20T04:13:41.606Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCTE16XZGRDSEGMFFZFWTJ3
    type: success
    content: "Ralph loop PR review workflow proved effective: dedicated review subagent correctly
      identified missing E2E tests as BLOCKING issue, prompted fix, re-review confirmed resolution,
      and merge completed successfully. The strict review criteria (AC coverage, E2E priority, test
      isolation) caught important gaps before merge."
    created_at: 2026-01-20T04:26:00.285Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCTR3VVRA9ECADDRDYEGPMR
    type: success
    content: Following established code patterns (ReferenceIndex, AlignmentIndex) made TraitIndex
      implementation straightforward. The bidirectional mapping pattern and constructor-based
      indexing approach worked well for trait-spec relationships. Test structure with AC annotations
      provides clear traceability.
    created_at: 2026-01-20T04:31:30.684Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCVFM07FH8DHYPV3AA3TTJ8
    type: success
    content: Trait display implementation completed efficiently by reusing TraitIndex foundation.
      Integrating into buildIndexes() made trait data available throughout CLI. Text and JSON output
      handled cleanly with separate formatting logic. Test fixtures required valid ULIDs - good
      validation caught this early.
    created_at: 2026-01-20T04:44:20.872Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCW3TDDPB6G1G8DFS10NAEE
    type: friction
    content: ULID validation in tests requires Crockford base32 alphabet (excludes I, L, O, U). Common
      test ULID patterns like 01TRAIT10... or 01TASK10... are invalid because they contain 'I'.
      Should document this in test helpers or provide a utility function that generates valid test
      ULIDs with readable prefixes.
    created_at: 2026-01-20T04:55:22.797Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCWZ8SEY6Z49V14D2X73ZGE
    type: friction
    content: "loadSpecFile() only parsed first YAML document when multiple documents present (---
      separators). Root cause: YAML.parse() vs YAML.parseAllDocuments(). This broke tests that
      appended traits to files using document separators. Fix was straightforward once identified,
      but debugging took time because manual tests worked (single document) while multi-document
      tests failed silently."
    created_at: 2026-01-20T05:10:22.255Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCX5DYS83R2SYQ1SNCNY03P
    type: success
    content: "Systematic debugging approach: When implementation code looks correct but tests fail,
      investigate test infrastructure first. Created isolated debug scripts to replicate exact test
      scenario, which revealed YAML parser only reading first document. This pattern of creating
      minimal reproduction scripts in scratchpad is valuable for debugging test failures."
    created_at: 2026-01-20T05:13:44.153Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCXGBQSPN7XYPRTV625E1TZ
    type: success
    content: Trait AC coverage validation implementation went smoothly by building on existing
      infrastructure. The TraitIndex and checkCompleteness() architecture made it straightforward to
      add inherited AC checking - just scan trait ACs the same way we scan direct ACs. The existing
      test coverage scanning and ref validation already handled most of the heavy lifting. Clean
      separation of concerns paid off.
    created_at: 2026-01-20T05:19:42.330Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCXQH9GZ4330JWEHD9QVXVT
    type: success
    content: PR review workflow caught test quality issues before merge - the automated subagent review
      identified fluff tests and missing documentation that would have degraded test quality
      patterns in the codebase. The strict review criteria (MUST-FIX vs suggestions) worked well.
    created_at: 2026-01-20T05:23:37.393Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCXY2PK61MY006C48874R44
    type: success
    content: "Full PR review → fix → merge cycle completed successfully in one iteration. The Ralph Loop
      workflow of dedicating review subagent, fixing issues, waiting for CI, and merging is working
      smoothly. Key: strict review criteria and blocking on CI checks before merge."
    created_at: 2026-01-20T05:27:11.828Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCXYZYP9E8CJMRS7TJMW29G
    type: friction
    content: "CI checks can take 3-4 minutes to complete, which can consume a significant portion of an
      iteration when waiting for merge approval. Consider: (1) Starting CI early if possible, (2)
      Using wait time productively for reflection/documentation, (3) Maybe implementing a timeout
      strategy in Ralph Loop for when CI takes too long."
    created_at: 2026-01-20T05:27:41.782Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCYH1P91QYPT0Q1WKW9JJZE
    type: success
    content: "Trait CLI implementation followed clean separation: parser infrastructure
      (TYPE_TO_CHILD_FIELD, NESTED_ITEM_FIELDS) before CLI commands. This pattern worked well -
      infrastructure changes enabled CLI to use existing patterns (addChildItem, buildIndexes)
      without special cases. E2E tests caught integration issues early (traits not loading from
      manifest)."
    created_at: 2026-01-20T05:37:33.385Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCZ3SHZSW2RDA6CCNTAPE5W
    type: friction
    content: trait-cli tests fail in vitest despite implementation working correctly in manual testing.
      All 12 failing tests involve trait list/get/item commands. Manual replication of exact test
      scenarios works perfectly. Tests use same CLI dist files. Issue is test infrastructure
      related, not implementation. Need to investigate vitest test execution environment
      differences.
    created_at: 2026-01-20T05:47:47.647Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFCZ4SK76NHJM1N4YT2RHS4Y
    type: success
    content: "Used dedicated review subagent to identify critical schema bug in PR #104. The subagent's
      strict review caught that ManifestSchema was missing the traits field, causing Zod to strip
      traits during parsing. This was a blocking bug that made all functionality fail. Fixed the
      issue and verified through extensive manual testing. Pattern: Always use review subagents
      before merge, they catch bugs that aren't obvious from code inspection alone."
    created_at: 2026-01-20T05:48:20.455Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD0A2TX3WZFG6RQMN45Y8CR
    type: friction
    content: "Test fixture anti-patterns found: (1) Naive YAML string manipulation breaks structure -
      use CLI commands or proper YAML parsers instead. (2) Tests creating invalid kspec structures -
      spec items must be nested under module items in type-specific fields. (3) Slug collisions with
      existing fixtures - tests need unique identifiers. (4) Missing test dependencies - tests
      assuming entities exist without creating them. These issues compound and hide real
      implementation bugs."
    created_at: 2026-01-20T06:08:42.334Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD0A8HPBCD40WAZSF3GMZRX
    type: success
    content: "Systematic test debugging approach worked well: (1) Run tests to see failures, (2) Isolate
      root cause through manual reproduction, (3) Fix fixtures to match actual kspec requirements,
      (4) Verify all tests pass. Using manual CLI invocations in temp dirs helped identify
      structural issues that weren't obvious from test code alone."
    created_at: 2026-01-20T06:08:48.182Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD0DWVHZJSMHVAQY11HFPEF
    type: success
    content: "PR review feedback loop worked well: (1) Subagent identified test quality issues with
      clear MUST-FIX verdict, (2) Systematic debugging traced root causes (YAML structure, slug
      conflicts, missing deps), (3) Fixed all 12 test failures, (4) All 695 tests pass locally, (5)
      PR updated and CI re-running. The strict review criteria (E2E tests, temp dirs, AC coverage,
      no fluff) ensured high quality implementation."
    created_at: 2026-01-20T06:10:47.281Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD0VXY441EVBG6HA85HNYBT
    type: success
    content: "Merged PR #104 (trait CLI commands) successfully. Review subagent found 0 blocking issues,
      100% AC coverage (8/8), all tests passing. Production-quality implementation with proper
      isolation and AC annotations."
    created_at: 2026-01-20T06:18:27.140Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD15XE0W20ZA8M475J43TKY
    type: friction
    content: "Test-driven development revealed implementation bugs in trait edge case handling. AC-2
      (cycle detection) and AC-3 (broken ref detection) both show validation passing when should
      fail. This pattern (write tests → discover implementation incomplete) is good but slows
      progress when implementation gaps are large. Consider: (1) Review implementation completeness
      before writing E2E tests (2) Add unit tests for validation logic first (3) Use TDD for new
      features but integration-test existing features differently"
    created_at: 2026-01-20T06:23:54.304Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD1TCR2MSTXEQE6TJD3ETG7
    type: success
    content: "Bug investigation pattern: When validation passes unexpectedly, check item counts in
      output. 'Items checked: 3' vs expected 5 revealed traits weren't being loaded. Count
      mismatches are powerful debugging signals for data loading issues."
    created_at: 2026-01-20T06:35:05.346Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD2G0RJ53P1Z0YQWBTF7WEM
    type: friction
    content: Testing git operations in isolated test environments - git clone --mirror fails in vitest
      with 'repository does not exist' despite source repo being properly initialized with commits.
      Same commands work when run manually. May be related to how vitest sandboxes processes or
      handles child_process spawn. Need to investigate if this is a PATH issue, git config issue, or
      test isolation problem. This pattern will affect any future commands that need to test git
      cloning or repository manipulation.
    created_at: 2026-01-20T06:46:53.970Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD2YKYFJ9WB1EX5R8D38WD1
    type: success
    content: Test helper pattern clarity - integration.test.ts showed the correct pattern of importing
      kspecOutput as kspec for string output. When tests fail due to type mismatches (expecting
      string, getting object), check imports against working test files.
    created_at: 2026-01-20T06:54:52.367Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD2YSFK15FSYZC7X4J9GPX3
    type: friction
    content: "Optional positional parameter order in CLI commands can create usability issues. [source]
      [dest] signature made it impossible to provide dest and default source. Changed to [dest]
      [source] which better matches common usage patterns. Consider: use named options (--source,
      --dest) for commands where both parameters are truly optional and order-independent."
    created_at: 2026-01-20T06:54:58.035Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFD2YYTAEEPDQ6CA3P6WSJ9H
    type: success
    content: "Systematic debugging approach worked well: (1) Verified git clone works standalone, (2)
      Added debug output to trace actual parameters, (3) Discovered output was empty not error, (4)
      Checked test helper return types, (5) Found pattern in working tests. Each step narrowed the
      problem space until root cause was clear."
    created_at: 2026-01-20T06:55:03.498Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFDPKZC956WTYA4BA7Q7SDQB
    type: friction
    content: "Shadow branch worktree gets removed when checking out branches. After merging PR and
      checking out main, .kspec/ worktree was removed. Attempting to recreate with 'git worktree add
      .kspec kspec-meta' created nested .kspec/.kspec/ worktree breaking kspec. Fix required
      absolute paths and manual cleanup. Root cause: git worktree add interprets paths relative to
      CWD which may be inside .kspec. Consider: (1) kspec commands that detect missing worktree and
      auto-repair (2) fix spawn error in 'kspec shadow repair' (3) prevent nested worktree
      creation."
    created_at: 2026-01-20T12:38:35.146Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFDPM7VF7ZGE02MCP3JB7131
    type: success
    content: "Ralph Loop iteration completed successfully: (1) Checked for open PRs per instructions (2)
      Found PR #106 with failing tests (7/8) (3) Launched review subagent to identify issues (4)
      Fixed all 3 blocking issues (worktree metadata cleanup, test setup, helper usage) (5) Verified
      locally (8/8 tests + full suite 707 passing) (6) Pushed and waited for CI (all green) (7)
      Merged PR and completed task @01KFBBTT (8) Captured 4 observations. Full workflow from PR
      review to merge completion in single iteration."
    created_at: 2026-01-20T12:38:43.824Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFDZBXCJQWP1CHC0277JAA0V
    type: success
    content: Completed first task in spec review sequence (@01KFDYAW). Simple cleanup task (removing
      non-existent file reference) was straightforward. Shadow branch auto-commit worked correctly -
      no manual commit needed for .kspec/ changes.
    created_at: 2026-01-20T15:11:28.146Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFDZC1RFZFR8FEHBFCEQ9S7G
    type: friction
    content: Easy to accidentally stay in .kspec/ directory after checking git log and then run kspec
      commands, which fail. The error message is clear ('Cannot run kspec from inside .kspec/
      directory'), but would be better to avoid this by being more careful about pwd or using
      absolute paths.
    created_at: 2026-01-20T15:11:32.624Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFDZGT05N02FNX2HXM4CRT8H
    type: success
    content: E2E validation workflow effective for confirming system readiness. Created test data,
      verified behavior, cleaned up - all within single iteration. Trait system confirmed
      production-ready without needing to create permanent test fixtures.
    created_at: 2026-01-20T15:14:08.518Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFDZVK4MA028H031BR26YZCE
    type: friction
    content: >-
      Manually editing .kspec/kynetic.yaml to add traits requires:

      1. Understanding ULID format constraints (no I, L, O, U chars)

      2. Manually generating valid ULIDs

      3. Working around shadow branch auto-commit restrictions


      The kspec trait add command would have handled all this, but for bulk creation of 8 traits
      with detailed AC, manual YAML editing was more practical. Future improvement: support adding
      AC during trait creation, or bulk trait import from YAML file.
    created_at: 2026-01-20T15:20:01.941Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFDZVT1Z2HBAY7D8T3M1JEE2
    type: success
    content: >-
      Debugging approach for YAML loading issues:

      1. Used node scripts to test individual components (initContext, extractItemsFromRaw,
      SpecItemSchema)

      2. Isolated the failure point (ULID validation regex)

      3. This incremental debugging approach was much faster than adding console.logs to source code


      Pattern to remember: when kspec commands don't work as expected, test the parser/schema layers
      directly with minimal scripts.
    created_at: 2026-01-20T15:20:09.024Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFE03DTPTD76XA5J8DH6H5KM
    type: success
    content: "Systematic AC addition workflow worked efficiently: grouped items by category (schema
      types, task types, relationships, YAML), added 2 AC per item following given/when/then format.
      Pattern: each AC should test a specific aspect of the item's behavior. For type definitions,
      one AC validates structure and one validates usage/purpose."
    created_at: 2026-01-20T15:24:18.647Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFE0E736KWBTZDRA1M01W1W8
    type: success
    content: Shadow branch auto-commit pattern works seamlessly for spec changes. Modified cli.yaml
      (spec file) and all changes were automatically committed to shadow branch via kspec commands
      (task note, task complete). No manual git operations needed. This confirms the design - spec
      changes live in shadow branch, auto-committed by CLI.
    created_at: 2026-01-20T15:30:12.199Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KFE0EM48X85MQSJDCJJMDWPR
    type: success
    content: "Trait application pattern for CLI commands: (1) All commands get json-output,
      semantic-exit-codes, error-guidance. (2) Batch operations add multi-ref-batch. (3) Destructive
      operations add confirmation-prompt. Applied consistently to 7 task lifecycle commands. Pattern
      is clear and repeatable for remaining commands."
    created_at: 2026-01-20T15:30:25.545Z
    author: "@claude"
    resolved: false
    resolution: null
includes: []
