kynetic_meta: '1.0'
agents:
  - _ulid: 01KF782ZSF5ZQTN2PKZPH6ASKA
    id: claude
    name: Claude Code Agent
    description: |
      Primary AI development agent for kynetic-spec.
      Works via Claude Code CLI in terminal sessions.
    capabilities:
      - code
      - test
      - refactor
      - review
      - design
      - document
    tools:
      - kspec
      - git
      - npm
      - vitest
    session_protocol:
      start: kspec session start
      checkpoint: kspec session checkpoint
    conventions:
      - Always use kspec CLI, never edit YAML directly
      - Add notes when completing significant work
      - Check spec coverage before implementing behavior changes
      - Commit changes before ending session
  - _ulid: 01KF7HMDT7TKRTSD78X6WAGBFV
    id: json-test
    name: JSON Test
    description: ''
    capabilities: []
    tools: []
    conventions: []
  - _ulid: 01KF7HN2D6GAAK99TN68N6NXVB
    id: json-test2
    name: JSON Test 2
    description: ''
    capabilities: []
    tools: []
    conventions: []
workflows:
  - _ulid: 01KF782ZSH8JG4CCJRWVQQ9G5R
    id: spec-first
    trigger: behavior-change
    description: |
      Check spec coverage before implementing changes.
      Core principle: If changing behavior and spec doesn't cover it,
      update the spec first.
    steps:
      - type: check
        content: Does the spec cover this change?
        on_fail: Update or create spec before proceeding
      - type: decision
        content: What is the spec status?
        options:
          - Spec exists and matches -> Derive task, proceed
          - Spec exists but outdated -> Update spec first
          - No spec exists -> Create spec first (behavior) or task directly (infra)
      - type: action
        content: Update or create spec item if needed
      - type: action
        content: Derive task from spec via kspec derive @spec-item
      - type: action
        content: Implement the change
  - _ulid: 01KF782ZSH103A99NV1VY65CFB
    id: session-start
    trigger: session-start
    description: |
      Get context at the beginning of a work session.
    steps:
      - type: action
        content: Run kspec session start to get context
      - type: check
        content: Are there active (in_progress) tasks?
        on_fail: Pick from ready tasks or triage inbox
      - type: action
        content: Review ready tasks and inbox items
      - type: action
        content: Start work on chosen task via kspec task start
  - _ulid: 01KF782ZSJH58GHDTHC873XJMA
    id: task-lifecycle
    trigger: task-complete
    description: |
      Complete a task properly with notes and cleanup.
    steps:
      - type: action
        content: Add completion note describing what was done
      - type: action
        content: Run kspec task complete @task --reason "summary"
      - type: check
        content: Are there uncommitted changes?
        on_fail: Commit changes with descriptive message
      - type: action
        content: Review if task unblocked other work
  - _ulid: 01KF782ZSJYAF3XCN89YD44XYM
    id: inbox-triage
    trigger: session-start
    description: |
      Triage inbox items during session context review.
    steps:
      - type: action
        content: Review oldest inbox items first
      - type: decision
        content: For each item, ask these questions
        options:
          - Still relevant? No -> delete
          - Scope clear? Yes -> promote to task
          - Needs spec work? -> Create/update spec first
          - Still unclear? -> Leave, add tag, revisit later
      - type: check
        content: Has item survived 3+ triage sessions?
        on_fail: Either promote with clear scope or delete
conventions:
  - _ulid: 01KF782ZSJCXRCGV0QJ8Y9AKN2
    domain: commits
    rules:
      - Use conventional commit format (feat, fix, docs, refactor, test, chore)
      - Reference task in commit body when applicable
      - Keep subject line under 72 characters
      - Include Co-Authored-By for AI contributions
    examples:
      - good: 'feat: add user login flow'
        bad: Added login
      - good: 'fix(auth): handle expired tokens'
        bad: fixed bug
  - _ulid: 01KF782ZSJ20FHWEXH93VB74Q5
    domain: notes
    rules:
      - Add notes when completing significant work
      - Include what was done, approach taken, and why
      - Note any deviations from plan or unexpected findings
      - Keep notes concise but informative for future context
    examples:
      - good: >-
          Implemented retry logic with exponential backoff. Chose 3 retries max based on API rate
          limits.
        bad: Done
  - _ulid: 01KF782ZSJZB6HWGFS01TM2R0R
    domain: naming
    rules:
      - Use kebab-case for slugs (task-user-login, not taskUserLogin)
      - Prefix task slugs with 'task-' for clarity
      - Use descriptive names that indicate purpose
      - Keep slugs short but unambiguous
    examples: []
  - _ulid: 01KF782ZSJ6HS09DBK7SVX5RR0
    domain: tags
    rules:
      - Use lowercase tags
      - Standard tags include mvp, post-mvp, bug, feature, infra, design
      - Add domain tags like cli, schema, parser, tasks
      - Limit to 3-5 tags per item for focus
    examples: []
  - _ulid: 01KF8BNJPQS0TKAGRD9PPGW6CS
    domain: branching
    rules:
      - Use descriptive branch names that indicate the type and scope of work
      - >-
        Use prefixes: feat/ for features, fix/ for bug fixes, refactor/ for refactoring, docs/ for
        documentation
      - Keep branch names short but meaningful (e.g., feat/user-auth, fix/login-crash)
      - Use kebab-case for branch names
    examples: []
  - _ulid: 01KF8BNQXGBBFYRDJKYQHAEDCC
    domain: documentation
    rules:
      - Write clear, concise documentation that explains why, not just what
      - Include examples for non-trivial concepts
      - Keep documentation close to code (inline comments for complex logic, README for overview)
      - Update documentation when behavior changes
    examples: []
observations:
  - _ulid: 01KF89NXNJVRJQ6RTHJ310SHXC
    type: idea
    workflow_ref: '@session-start'
    content: Need better error messages
    created_at: '2026-01-18T10:16:15.283Z'
    author: '@claude'
    resolved: false
    resolution: null
    promoted_to: '@01KF89NY'
  - _ulid: 01KF8H0P1T9NMQX1J5YTCNYYEQ
    type: friction
    content: test observation
    created_at: '2026-01-18T12:24:27.962Z'
    author: '@claude'
    resolved: false
    resolution: null
  - _ulid: 01KF8H0TNMR2T3Y9WVPQ3DXYTR
    type: idea
    content: test with json
    created_at: '2026-01-18T12:24:32.693Z'
    author: '@claude'
    resolved: false
    resolution: null
  - _ulid: 01KF8H1SGD38S5Z4NPN2DWXF22
    type: success
    content: feature works great
    created_at: '2026-01-18T12:25:04.269Z'
    author: '@claude'
    resolved: false
    resolution: null
  - _ulid: 01KF8H1YB9N6AHX52VRWZDVNGZ
    type: question
    workflow_ref: '@spec-first-workflow'
    content: how should we handle edge cases?
    created_at: '2026-01-18T12:25:09.225Z'
    author: '@claude'
    resolved: false
    resolution: null
  - _ulid: 01KF8J6TZN293P7YYNFQT5MC6Z
    type: friction
    workflow_ref: '@spec-first'
    content: test friction observation
    created_at: '2026-01-18T12:45:18.198Z'
    author: '@claude'
    resolved: false
    resolution: null
  - _ulid: 01KF8J6VF7C94B9RZ5W5974ERA
    type: success
    content: test success observation
    created_at: '2026-01-18T12:45:18.695Z'
    author: '@claude'
    resolved: false
    resolution: null
  - _ulid: 01KF8J6VZ2J9KH119AF0C5XYS0
    type: question
    workflow_ref: '@task-start'
    content: test question
    created_at: '2026-01-18T12:45:19.202Z'
    author: '@claude'
    resolved: false
    resolution: null
  - _ulid: 01KF8JEE87205WH8YBGSWS84G6
    type: friction
    content: Test observation for promote command
    created_at: '2026-01-18T12:49:27.303Z'
    author: '@claude'
    resolved: false
    resolution: null
    promoted_to: '@01KF8JEJ'
  - _ulid: 01KF8JEQ7P3JWHTH6V5PNGZ4CG
    type: success
    content: Another test observation
    workflow_ref: '@spec-first'
    created_at: '2026-01-18T12:49:36.502Z'
    author: '@claude'
    resolved: false
    resolution: null
includes: []
