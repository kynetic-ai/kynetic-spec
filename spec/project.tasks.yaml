- _ulid: 01KEZFXCM3WEMMRGFDZSJSRARJ
  slugs:
    - task-cli-polish
  title: CLI output refinement and polish
  type: task
  spec_ref: null
  status: pending
  blocked_by: []
  depends_on: []
  context: []
  priority: 3
  tags:
    - cli
    - ux
  vcs_refs: []
  created_at: '2026-01-15T00:12:01.539Z'
  notes:
    - _ulid: 01KEZFXP1JPK4VBWDXTK2Q00AP
      created_at: '2026-01-15T00:12:11.187Z'
      content: |-
        Placeholder for CLI refinement work. Known items:

        - Color consistency pass (labels vs values, status colors)
        - Consider adding spec get command for viewing spec details directly
        - Review output density/formatting across commands
        - Potential: depends_on/relates_to expansion in spec view
      supersedes: null
  todos: []
- _ulid: 01KEZG58FJDPVYND9ZWX264WF2
  slugs:
    - task-alignment-system
  title: Design spec-implementation alignment system
  type: spike
  spec_ref: null
  status: pending
  blocked_by: []
  depends_on: []
  context: []
  priority: 2
  tags:
    - core
    - process
  vcs_refs: []
  created_at: '2026-01-15T00:16:19.442Z'
  notes:
    - _ulid: 01KEZG5N9BTACBWVPNVYDGQ7BC
      created_at: '2026-01-15T00:16:32.556Z'
      content: >-
        Problem: Spec, tasks, and implementation drift apart over time.


        Examples of drift:

        - Task @task-reference-resolution spec says nothing about dynamic ULID shortening, but that
        became a key implementation detail

        - User requests during implementation add features not in original spec

        - Implementation discoveries change the approach


        Goals:

        1. Keep specs as accurate source of truth

        2. Make drift visible and actionable

        3. Guide agents to update specs when deviating

        4. Enable reconciliation after the fact


        Potential mechanisms:


        PROACTIVE (during work):

        - Task start: show spec, prompt for planned deviations

        - Task complete: verify against acceptance criteria, prompt for spec updates

        - Agent instructions mandating spec updates when deviating


        REACTIVE (backprop):

        - kspec reconcile: compare task notes to spec, flag drift

        - Generate spec update suggestions from implementation notes

        - Mark specs 'needs-review' when notes mention unlisted changes


        STRUCTURAL:

        - Acceptance criteria as verifiable checkboxes

        - 'implementation_notes' field on spec items

        - Spec versioning when updated post-implementation

        - Deviation tracking on tasks


        Deliverables:

        1. Add spec items to spec/modules/ defining alignment features

        2. Create implementation tasks from the spec

        3. Update AGENTS.md with alignment guidance
      supersedes: null
  todos: []
- _ulid: 01KEZH1HE2TKG8Z79XW7G0Y016
  slugs:
    - task-local-cli-setup
  title: Set up local CLI development workflow
  type: task
  spec_ref: null
  status: completed
  blocked_by: []
  closed_reason: Build fixed, global install working, documented usage
  depends_on: []
  context: []
  priority: 2
  tags:
    - dx
    - cli
  vcs_refs: []
  created_at: '2026-01-15T00:31:46.114Z'
  started_at: '2026-01-15T00:32:00.757Z'
  completed_at: '2026-01-15T00:33:00.493Z'
  notes:
    - _ulid: 01KEZH1T305WYZZE596KNCQZK3
      created_at: '2026-01-15T00:31:54.976Z'
      content: |-
        Goal: Enable kspec and kspec-dev commands for local usage.

        Plan:
        1. Verify/fix build process (npm run build)
        2. Test global install (npm install -g .)
        3. Document shell alias for kspec-dev
        4. Add dev script to package.json for portability

        Setup:
        - kspec: stable built version via global install
        - kspec-dev: alias to tsx src/cli/index.ts (live source)
      supersedes: null
    - _ulid: 01KEZH3MA5QPXCA6A6535W51Q5
      created_at: '2026-01-15T00:32:54.598Z'
      content: |-
        Completed setup:

        1. Fixed TypeScript build error (cast through unknown)
        2. Build works: npm run build
        3. Global install works: npm install -g .
        4. kspec command available globally

        Usage:
        - Stable: kspec tasks ready
        - Dev: npm run dev -- tasks ready

        Optional shell alias for convenience (add to ~/.bashrc or ~/.zshrc):
          alias kspec-dev='npx tsx /home/chapel/Projects/kynetic-spec/src/cli/index.ts'

        To update stable version:
          npm run build && npm install -g .
      supersedes: null
  todos: []
- _ulid: 01KEZJ3E5W74AAF87Q57GTNNM6
  slugs:
    - task-author-env
  title: Auto-detect author from environment (Claude Code integration)
  type: task
  spec_ref: null
  status: pending
  blocked_by: []
  depends_on: []
  context: []
  priority: 3
  tags:
    - dx
    - integration
  vcs_refs: []
  created_at: '2026-01-15T00:50:16.892Z'
  notes:
    - _ulid: 01KEZJ3QN4ZD7TMZ1X4TBMGC52
      created_at: '2026-01-15T00:50:26.597Z'
      content: >-
        Problem: Notes created by Claude show author as 'unknown' because there's no way to
        auto-detect the author.


        Research findings - Claude Code environment:


        1. Claude Code does NOT set a self-identification env var automatically


        2. Two ways to configure it:

           Option A - Settings env (simplest):
           Add to ~/.claude/settings.json:
           {
             "env": {
               "KSPEC_AUTHOR": "@claude"
             }
           }

           Option B - SessionStart hook:
           {
             "hooks": {
               "SessionStart": [{
                 "type": "command",
                 "command": "echo 'export KSPEC_AUTHOR=@claude' >> \"\$CLAUDE_ENV_FILE\""
               }]
             }
           }

        3. Available Claude Code variables:
           - CLAUDE_PROJECT_DIR: project root path
           - CLAUDE_CODE_REMOTE: 'true' if web/remote session
           - Hook inputs have session_id, transcript_path, etc.

        Implementation:

        - Update createNote() to check process.env.KSPEC_AUTHOR as default

        - Document setup in README/CLAUDE.md

        - Consider KSPEC_AUTHOR or more generic like GIT_AUTHOR_NAME fallback
      supersedes: null
  todos: []
- _ulid: 01KEZJNSGPTVRCMT9NHNPJ93D8
  slugs:
    - task-cli-help
  title: Implement tiered CLI help (default + full with examples)
  type: task
  spec_ref: null
  status: pending
  blocked_by: []
  depends_on: []
  context: []
  priority: 2
  tags:
    - cli
    - dx
    - docs
  vcs_refs: []
  created_at: '2026-01-15T01:00:18.326Z'
  notes:
    - _ulid: 01KEZJP4TRJN1QM76D8N3AWC0Z
      created_at: '2026-01-15T01:00:29.913Z'
      content: |-
        Design: Two tiers of CLI help

        Default (--help):
        - Succinct, flags and options only
        - Quick human reference

        Extended (--help-full or 'kspec help <command>'):
        - Detailed explanations
        - Examples
        - Concept clarifications (e.g., blocked_by vs depends_on)
        - Edge cases and gotchas
        - Agent-friendly context that can be pulled into prompts

        Example for 'task unblock':

        Default:
          kspec task unblock <ref>  Unblock a task

        Extended:
          kspec task unblock <ref>
          
          Clears manual blockers and sets status to pending.
          
          Note: This clears the blocked_by field (manual string blockers),
          NOT depends_on (task references). Dependencies auto-resolve
          when referenced tasks complete.
          
          Example:
            kspec task block @my-task --reason 'Waiting on design review'
            kspec task unblock @my-task  # clears all blocked_by entries

        Implementation options:
        - Commander's .addHelpText() for extended sections
        - Separate 'kspec help <topic>' command
        - --verbose or --full flag on --help
      supersedes: null
  todos: []
- _ulid: 01KEZKE54QQJQ97TR13DZQ36EZ
  slugs:
    - task-inbox-system
  title: Design inbox/capture system for unstructured ideas
  type: spike
  spec_ref: null
  status: pending
  blocked_by: []
  depends_on: []
  context: []
  priority: 2
  tags:
    - core
    - process
  vcs_refs: []
  created_at: '2026-01-15T01:13:36.663Z'
  notes:
    - _ulid: 01KEZKEHF0CCXCGHY8FMS5XPCA
      created_at: '2026-01-15T01:13:49.281Z'
      content: |-
        Concept: Low-friction capture space for ideas that aren't tasks yet.

        Problem:
        - Creating a task has overhead (title, slug, priority, etc.)
        - Random ideas get lost or forgotten
        - Not everything needs to be a task immediately

        Design ideas:

        Structure:
        - Simple text entries with timestamp
        - Optional tags/labels
        - Auto-generated ID
        - Maybe just: { id, text, created_at, tags? }

        Capture:
        - kspec inbox add 'random thought about X'
        - Or even: kspec idea 'random thought'
        - Minimal friction, just dump and go

        Triage (interactive):
        - kspec inbox review
        - Shows items one by one
        - Actions: promote to task, discard, defer, tag, merge

        Triage (automatic):
        - Rules-based: 'if tagged #bug, auto-create task'
        - Time-based: 'items older than 7 days, prompt for review'
        - AI-assisted: 'suggest task creation for well-formed items'

        Storage:
        - inbox.yaml or project.inbox.yaml
        - Simple flat list

        Hierarchy:
          Inbox (unstructured) → Tasks (work items) → Spec (requirements)

        Example flow:
        1. kspec inbox add 'maybe we need better error messages'
        2. Later: kspec inbox review
        3. Decide: promote to @task-error-messages or discard
      supersedes: null
  todos: []
