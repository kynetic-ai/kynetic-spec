{
  "generated_at": "2026-01-24T18:20:25.574Z",
  "branch": "test/pid-port-tests",
  "context": {
    "focus": null,
    "threads": [],
    "open_questions": [],
    "updated_at": "2026-01-22T21:05:45.847Z"
  },
  "active_tasks": [],
  "pending_review_tasks": [
    {
      "ref": "01KFQAAM",
      "title": "Global PID/port management tests",
      "started_at": "2026-01-24T18:15:07.959Z",
      "priority": 1,
      "spec_ref": "@multi-directory-daemon",
      "note_count": 2,
      "last_note_at": "2026-01-24T18:20:11.493Z",
      "todo_count": 0,
      "incomplete_todos": 0
    }
  ],
  "recent_notes": [],
  "active_todos": [],
  "ready_tasks": [
    {
      "ref": "01KFQAAX",
      "title": "ProjectContextManager unit tests",
      "priority": 1,
      "spec_ref": "@multi-directory-daemon",
      "tags": [
        "testing",
        "phase-1"
      ]
    },
    {
      "ref": "01KFQAC1",
      "title": "Path validation middleware tests",
      "priority": 1,
      "spec_ref": "@multi-directory-daemon",
      "tags": [
        "testing",
        "phase-3"
      ]
    },
    {
      "ref": "01KFMMJ4",
      "title": "Implement: GitHub Pages Export",
      "priority": 3,
      "spec_ref": "@gh-pages-export",
      "tags": [
        "static",
        "export",
        "github"
      ]
    },
    {
      "ref": "01KFMMXF",
      "title": "Export command implementation",
      "priority": 3,
      "spec_ref": "@gh-pages-export",
      "tags": [
        "phase-4",
        "export"
      ]
    },
    {
      "ref": "01KFMMXK",
      "title": "Static SPA for GitHub Pages",
      "priority": 3,
      "spec_ref": "@gh-pages-export",
      "tags": [
        "phase-4",
        "export"
      ]
    },
    {
      "ref": "01KFMMXR",
      "title": "Read-only mode behaviors",
      "priority": 3,
      "spec_ref": "@gh-pages-export",
      "tags": [
        "phase-4",
        "export"
      ]
    },
    {
      "ref": "01KFMMXW",
      "title": "GitHub Pages CI workflow",
      "priority": 3,
      "spec_ref": "@gh-pages-export",
      "tags": [
        "phase-4",
        "export"
      ]
    }
  ],
  "blocked_tasks": [
    {
      "ref": "01KFBDQE",
      "title": "Add spec-schema drift detection to validation",
      "blocked_by": [
        "Needs clearer scoping - see latest note for details"
      ],
      "unmet_deps": []
    },
    {
      "ref": "01KFMMZW",
      "title": "API integration tests",
      "blocked_by": [
        "Needs architectural decision: E2E test framework approach (Bun test runner vs vitest with real server vs manual QA). See notes for analysis."
      ],
      "unmet_deps": []
    }
  ],
  "recently_completed": [
    {
      "ref": "01KFQAAA",
      "title": "Multi-directory daemon test fixtures",
      "completed_at": "2026-01-24T18:14:16.964Z",
      "closed_reason": "Merged in PR #213. Created multi-directory daemon test fixtures with helper function, comprehensive documentation, and proper module declarations. Fixed validation conflicts by excluding multi-dir from default setupTempFixtures()."
    },
    {
      "ref": "01KFR82A8",
      "title": "Implement: Task Work Loop Workflow",
      "completed_at": "2026-01-24T17:51:08.537Z",
      "closed_reason": "Merged in PR #212. Created @task-work-loop workflow with 8 steps for autonomous agents. Updated spec to remove ralph-specific ACs (ac-2, ac-10) and keep verification (ac-6)."
    },
    {
      "ref": "01KFR829",
      "title": "Implement: Loop Mode Workflows",
      "completed_at": "2026-01-24T16:20:51.204Z",
      "closed_reason": "Merged in PR #211"
    },
    {
      "ref": "01KFQ6GT",
      "title": "Spec multi-directory daemon architecture",
      "completed_at": "2026-01-24T13:06:16.977Z",
      "closed_reason": "Spec written with 39 ACs covering multi-directory daemon architecture. 21 implementation tasks created with slugs, dependencies, and automation eligibility. Post-review fixes applied for edge cases (symlinks, shutdown cleanup, default project deletion)."
    },
    {
      "ref": "01KFPRX9",
      "title": "E2E Testing Infrastructure Setup",
      "completed_at": "2026-01-24T04:01:48.882Z",
      "closed_reason": "PR #209 merged. E2E testing infrastructure with Playwright is now set up."
    },
    {
      "ref": "01KFPJD8",
      "title": "Daemon serves built web UI on root route",
      "completed_at": "2026-01-24T00:31:51.352Z",
      "closed_reason": "Merged PR #208. Daemon now serves web UI on same port, enabling E2E testing."
    },
    {
      "ref": "01KFP5Y1",
      "title": "Fix daemon path resolution for npm installs",
      "completed_at": "2026-01-23T21:57:52.856Z",
      "closed_reason": "PR #207 merged - daemon bundled with package, path resolution fixed for npm installs, cross-platform compatibility (bun --version, shx cp)"
    },
    {
      "ref": "01KFNK3F",
      "title": "Add type validation tests to shared package",
      "completed_at": "2026-01-23T18:40:19.399Z",
      "closed_reason": "Type validation tests merged in PR #206"
    },
    {
      "ref": "01KFMMZR",
      "title": "Executable compilation with bun build",
      "completed_at": "2026-01-23T17:50:06.219Z",
      "closed_reason": "PR #205 merged successfully. Executable compilation implemented with build:compile script and cross-platform build-executables.sh script. Added E2E test coverage for AC-16 that gracefully skips if Bun not available. All CI checks passed (tests, claude-review, Greptile 5/5 confidence). Implementation complete."
    },
    {
      "ref": "01KFMMZK",
      "title": "Daemon auto-start configuration",
      "completed_at": "2026-01-23T17:24:19.865Z",
      "closed_reason": "PR #204 merged successfully. Daemon auto-start configuration implemented with Greptile feedback addressed (runtime compatibility, package-relative paths, simplified defaults logic). All CI checks passed. All 1207 tests passing."
    }
  ],
  "recent_commits": [
    {
      "hash": "3606d27",
      "full_hash": "3606d27f264ee5556b5bdd890e5ab97bd18d94d4",
      "date": "2026-01-24T18:19:11.000Z",
      "message": "test: Add global PID/port management tests",
      "author": "Jacob Chapel"
    },
    {
      "hash": "640527d",
      "full_hash": "640527db0cef276565bc09a1ce384d6d8f5e995a",
      "date": "2026-01-24T18:13:57.000Z",
      "message": "feat: Add multi-directory daemon test fixtures (#213)",
      "author": "Jacob Chapel"
    },
    {
      "hash": "2549f8f",
      "full_hash": "2549f8f02403f337ead11b3674bdde1b7402186f",
      "date": "2026-01-24T18:08:22.000Z",
      "message": "fix: exclude multi-dir fixtures from default setupTempFixtures",
      "author": "Jacob Chapel"
    },
    {
      "hash": "a924937",
      "full_hash": "a92493764be68e18f67e8125757f3aaac24554db",
      "date": "2026-01-24T17:55:24.000Z",
      "message": "feat: add multi-directory daemon test fixtures",
      "author": "Jacob Chapel"
    },
    {
      "hash": "d9ff2b7",
      "full_hash": "d9ff2b7c651a83b1286718c8c2ffe502ebd9b768",
      "date": "2026-01-24T17:50:52.000Z",
      "message": "feat: add task-work-loop workflow for autonomous agents (#212)",
      "author": "Jacob Chapel"
    },
    {
      "hash": "bdb7ad3",
      "full_hash": "bdb7ad39bf365b8a0f927ac76b70dc34cb49c967",
      "date": "2026-01-24T17:46:56.000Z",
      "message": "fix: rewrite loop mode section for agent clarity",
      "author": "Jacob Chapel"
    },
    {
      "hash": "2367822",
      "full_hash": "2367822a685bc697e2f00ad2219355d8d3338783",
      "date": "2026-01-24T17:19:01.000Z",
      "message": "fix: correct task-work-loop workflow behavior",
      "author": "Jacob Chapel"
    },
    {
      "hash": "8266933",
      "full_hash": "82669331ac9485e80ff6cdd7b138ae9795ca32bb",
      "date": "2026-01-24T16:46:10.000Z",
      "message": "feat: add task-work-loop workflow for autonomous agents",
      "author": "Jacob Chapel"
    },
    {
      "hash": "5f46c8e",
      "full_hash": "5f46c8e798771a89e26151f3e97a74c00785a548",
      "date": "2026-01-24T16:39:07.000Z",
      "message": "docs: add E2E test and ULID fixture guidance (#210)",
      "author": "Jacob Chapel"
    },
    {
      "hash": "631053b",
      "full_hash": "631053b584d1056dd14deeb6534ef930a65da055",
      "date": "2026-01-24T16:22:43.000Z",
      "message": "fix: align ULID snippet variable names with implementation",
      "author": "Jacob Chapel"
    }
  ],
  "working_tree": {
    "clean": true,
    "staged": [],
    "unstaged": [],
    "untracked": []
  },
  "inbox_items": [
    {
      "ref": "01KF16XG",
      "text": "Hook for SessionStart or post-compaction to inject relevant context and subtle instructions. Could auto-run 'kspec session start' or similar to give agent fresh context after memory is compacted.",
      "created_at": "2026-01-15T16:13:16.998Z",
      "tags": [],
      "added_by": "@claude"
    },
    {
      "ref": "01KF1V53",
      "text": "Spec review process: 3 parallel agents (internal fit, prior art comparison, external research) before finalizing major specs. Worked well for shadow branch spec design - should be formalized in meta-spec workflows.",
      "created_at": "2026-01-15T22:06:57.823Z",
      "tags": [
        "workflow",
        "meta"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KF3PJW",
      "text": "CLI output parity - JSON and human-readable outputs can drift when adding features. Investigate patterns to keep them in sync by design: unified output formatter, schema-driven rendering, shared data structure that both modes consume. Current pattern: output(data, humanFormatter) - data goes to JSON, formatter handles human. But formatter can show derived/computed info that isn't in data.",
      "created_at": "2026-01-16T15:25:35.193Z",
      "tags": [
        "cli",
        "dx",
        "design"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KF4DS5",
      "text": "Investigate ready task ordering beyond priority - creation order may not be ideal. Consider: recency of notes/activity, dependency depth, spec item priority inheritance, manual ordering field, tags for urgency",
      "created_at": "2026-01-16T22:10:58.273Z",
      "tags": [
        "design",
        "tasks",
        "dx"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KF554T",
      "text": "Ralph Wiggum / Looper Mode - Create a kspec-integrated autonomous loop runner. Core idea: a script that runs Claude Code repeatedly with fresh context, using a templated prompt that instructs it to:\n\n1. Run 'kspec session start' to see ready tasks\n2. Pick a well-defined task (high priority, clear spec, no blockers)\n3. Work on it until completion or stuck\n4. Commit and complete the task\n5. Exit cleanly (the outer loop restarts with fresh context)\n\nKey features from research:\n- Simple core: while :; do cat PROMPT.md | claude ; done\n- Context persists via filesystem/git, not session memory\n- Dual-condition exit: require both completion indicator AND explicit exit signal\n- Circuit breaker: stop after N loops with no progress or repeated errors\n- Rate limiting for API calls\n\nKspec-specific additions:\n- Task selection heuristics (prioritize: clear AC, no blockers, isolated scope)\n- Progress tracking via task notes before each exit\n- Session checkpoint before exit to ensure clean state\n- Maybe: task budget (only attempt tasks under estimated N turns)\n\nThe beauty is each iteration starts fresh but inherits cumulative work. Bad iterations don't compound context - they just waste one run.",
      "created_at": "2026-01-17T04:59:17.160Z",
      "tags": [
        "automation",
        "workflow",
        "agents"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KF6541",
      "text": "Ralph TUI mode: Optional terminal UI for ralph that provides real-time visualization of agent progress, event stream, session status. Would build on streaming/ACP foundation. Lower priority than core auditability work.",
      "created_at": "2026-01-17T14:18:06.435Z",
      "tags": [
        "ralph",
        "tui",
        "optional"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KF8TQ5",
      "text": "Transaction/batch mechanics for kspec operations - ability to set a mark point where changes don't auto-commit until a final 'commit' call. Could help with bulk operations, rollback on errors, and atomic multi-item changes. Challenges: managing state across commands, cleanup on abandoned transactions, shadow branch implications. Maybe simpler approach: explicit 'kspec bulk' command that takes a script/list of operations and executes them atomically.",
      "created_at": "2026-01-18T15:14:02.282Z",
      "tags": [
        "idea",
        "cli",
        "architecture"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KFA1Q5",
      "text": "Phase 1: Implement structured error codes and recovery hints for CLI - define CliError type, map existing error() calls to structured codes, add recovery suggestions for common error scenarios",
      "created_at": "2026-01-19T02:35:36.152Z",
      "tags": [
        "agent-first",
        "cli",
        "phase-1"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KFA1Q9",
      "text": "Phase 1: Implement unified output envelope for JSON mode - wrap all JSON responses in consistent structure with success/data/metadata/error fields",
      "created_at": "2026-01-19T02:35:40.491Z",
      "tags": [
        "agent-first",
        "cli",
        "phase-1"
      ],
      "added_by": "@claude"
    },
    {
      "ref": "01KFA1QB",
      "text": "Phase 2: Add dry-run support to mutating commands - implement --dry-run flag for task add/set, item add/set/delete, derive, inbox promote. Show preview of changes without executing",
      "created_at": "2026-01-19T02:35:42.815Z",
      "tags": [
        "agent-first",
        "cli",
        "phase-2"
      ],
      "added_by": "@claude"
    }
  ],
  "stats": {
    "total_tasks": 363,
    "in_progress": 0,
    "pending_review": 1,
    "ready": 18,
    "blocked": 2,
    "completed": 298,
    "inbox_items": 68
  }
}