kynetic_meta: "1.0"

agents:
  - _ulid: 01KF79QXTTX8KBRYK14NWV1KYK
    id: test
    name: Test Author
    description: Generic test author for fixture notes
    capabilities: []
    tools: []
    conventions: []

  - _ulid: 01KF79C0GSJZ7MYFX3R9B1ANNP
    id: test-agent
    name: Test Agent
    description: A test agent for integration testing
    capabilities:
      - code
      - test
    tools:
      - kspec
      - git
    session_protocol:
      start: "kspec session start"
      checkpoint: "kspec session checkpoint"
    conventions:
      - Test convention 1
      - Test convention 2

  - _ulid: 01KF79C0H03R3755DK9ZBX8R0R
    id: review-agent
    name: Review Agent
    description: Agent specialized for code review
    capabilities:
      - review
      - analyze
    tools:
      - kspec
    session_protocol:
      start: "kspec session start"
    conventions:
      - Always check tests

workflows:
  - _ulid: 01KF7A1S00WF1XVCPD9YQXH8ZN
    id: task-start
    trigger: "Before starting a task"
    description: Pre-task checklist workflow
    steps:
      - type: check
        content: Read the spec item linked to the task
        on_fail: Cannot proceed without spec context
      - type: check
        content: Verify all dependencies are completed
        on_fail: Block task and note missing dependencies
      - type: action
        content: Add initial note documenting approach
      - type: decision
        content: Does this need plan mode?
        options:
          - "Yes - enter plan mode"
          - "No - proceed with implementation"

  - _ulid: 01KF7A1S05YNHQQ4N2MQBY9CHT
    id: commit
    trigger: "After completing a task"
    description: Commit workflow with trailers
    steps:
      - type: check
        content: All tests passing
        on_fail: Fix failing tests before committing
      - type: action
        content: Stage relevant files
      - type: action
        content: Write commit message with Task/Spec trailers
