inbox:
  - _ulid: 01KF150ZY1Z272H5CF55NQ4JBP
    text: >-
      Subagent review on task complete - when agent marks task complete, include instructions to
      spawn review subagent. Subagent runs kspec task review to get task details, linked spec,
      acceptance criteria, git diff since started_at. Reports gaps between spec and implementation
      back to main agent. Configurable via setup (opt-in/out). Ties into alignment system.
    created_at: '2026-01-15T15:40:14.146Z'
    tags:
      - review
      - agents
      - process
    added_by: '@claude'
  - _ulid: 01KF16XGA6SNNRHFPX15N0HE6F
    text: >-
      Hook for SessionStart or post-compaction to inject relevant context and subtle instructions.
      Could auto-run 'kspec session start' or similar to give agent fresh context after memory is
      compacted.
    created_at: '2026-01-15T16:13:16.998Z'
    tags: []
    added_by: '@claude'
  - _ulid: 01KF1JPF8P6VDNPY4S9YAJ797P
    text: >-
      Artifacts feature - storage for large files and non-text artifacts tied to specs/tasks. Use
      cases: reference images, research docs, generated diagrams, data files, PDFs. Unknowns:
      integration model (spec-ref? task-ref? standalone?), reference syntax (@artifact?),
      organization (by task? by type? flat?), cleanup/lifecycle (archive with task? manual?),
      storage location (artifacts/ dir? .kspec/artifacts?), git handling (LFS? gitignore?
      committed?).
    created_at: '2026-01-15T19:39:09.462Z'
    tags:
      - feature
      - design
      - artifacts
    added_by: '@claude'
  - _ulid: 01KF1V53RYTWER59VR53W1CSTW
    text: >-
      Spec review process: 3 parallel agents (internal fit, prior art comparison, external research)
      before finalizing major specs. Worked well for shadow branch spec design - should be
      formalized in meta-spec workflows.
    created_at: '2026-01-15T22:06:57.823Z'
    tags:
      - workflow
      - meta
    added_by: '@claude'
  - _ulid: 01KF28DKM459J41MP8HDMCMEVC
    text: >-
      Spec notes feature - append-only notes on spec items for capturing implementation gotchas,
      learnings, and context. Similar to task notes but for specs. Use case: documenting things like
      'git worktree prune needed for orphaned worktrees' that are valuable for
      maintenance/reimplementation but don't belong in formal AC.
    created_at: '2026-01-16T01:58:47.685Z'
    tags:
      - feature
      - spec
      - dx
    added_by: '@claude'
  - _ulid: 01KF292BRXGAFQBJGJAJKY8RF6
    text: >-
      Test coverage tracking per spec item - link tests to spec items, show coverage in item get,
      warn when AC lacks tests
    created_at: '2026-01-16T02:10:07.774Z'
    tags:
      - feature
      - testing
      - spec
    added_by: '@claude'
  - _ulid: 01KF3HG0PHS4N4ME6NXQ4RZTE2
    text: >-
      Alignment system spec coverage gap - AlignmentIndex, auto-sync, validation commands (kspec
      item status, alignment check) were implemented pragmatically without spec. Need to create spec
      items documenting: alignment concept, AlignmentIndex structure, auto-sync behavior, alignment
      validation, guidance output format.
    created_at: '2026-01-16T13:56:38.226Z'
    tags:
      - spec-gap
      - alignment
      - debt
    added_by: '@claude'
  - _ulid: 01KF3MVM96A3T653E70QKB0F2Z
    text: >-
      Item list --tree or --hierarchy flag - shows parent/child structure for finding where to place
      new items. Friction: during triage had to grep/search to find @cli module since flat list
      doesn't show nesting.
    created_at: '2026-01-16T14:55:24.454Z'
    tags:
      - reflection
      - cli
      - dx
    added_by: '@claude'
  - _ulid: 01KF3PJWJS42Y0QZFKWMX3A4D9
    text: >-
      CLI output parity - JSON and human-readable outputs can drift when adding features.
      Investigate patterns to keep them in sync by design: unified output formatter, schema-driven
      rendering, shared data structure that both modes consume. Current pattern: output(data,
      humanFormatter) - data goes to JSON, formatter handles human. But formatter can show
      derived/computed info that isn't in data.
    created_at: '2026-01-16T15:25:35.193Z'
    tags:
      - cli
      - dx
      - design
    added_by: '@claude'
  - _ulid: 01KF3TB7C5GCC7VADGZ9YDKXK6
    text: >-
      Integration test performance - tests take 50-75s which discourages frequent runs. Investigate:
      parallel test execution, fixture caching, test isolation overhead, selective test runs
      (--grep). Goal: fast feedback loop during development.
    created_at: '2026-01-16T16:31:18.406Z'
    tags:
      - testing
      - dx
      - performance
    added_by: '@claude'
  - _ulid: 01KF3TRCMB5SN4GRM2E9PG5ZGB
    text: >-
      task start should output spec context, notes, and AC testing guidance - remind about automated
      tests not just manual verification
    created_at: '2026-01-16T16:38:29.772Z'
    tags:
      - cli
      - dx
    added_by: '@claude'
  - _ulid: 01KF3XAY7DRQ8J7E6YTNAPV2FS
    text: >-
      Stale status detection in validate - warn when: (1) umbrella/parent task is pending but child
      spec items are all implemented, (2) spec item marked implemented but no completed tasks
      reference it, (3) task marked completed but linked spec still not_started. Could be part of
      --completeness flag or separate --staleness check. Detected manually this session: Shadow
      Branch parent task was pending while all children implemented.
    created_at: '2026-01-16T17:23:34.765Z'
    tags:
      - validation
      - dx
      - reflection
    added_by: '@claude'
  - _ulid: 01KF42TV18D7HC8S9G4GR9S8ZB
    text: >-
      kspec log enhancements - (1) Without ref argument, show all commits with Task:/Spec: trailers
      (all tracked commits in order). (2) Support passthrough of typical git log args like -p,
      --stat, etc. Could use -- separator for passthrough args: kspec log @ref -- -p --stat
    created_at: '2026-01-16T18:59:38.665Z'
    tags:
      - cli
      - enhancement
    added_by: '@claude'
  - _ulid: 01KF4DAESR4C4K6VHWY0MNSW79
    text: >-
      Add --priority flag to derive command to override default P3 when deriving tasks from specs
      without explicit priority
    created_at: '2026-01-16T22:02:56.184Z'
    tags:
      - cli
      - derive
    added_by: '@claude'
  - _ulid: 01KF4DS5K10SKW9A533DQR7TH0
    text: >-
      Investigate ready task ordering beyond priority - creation order may not be ideal. Consider:
      recency of notes/activity, dependency depth, spec item priority inheritance, manual ordering
      field, tags for urgency
    created_at: '2026-01-16T22:10:58.273Z'
    tags:
      - design
      - tasks
      - dx
    added_by: '@claude'
  - _ulid: 01KF4FM90P16F3KCVN43SQBBB8
    text: >-
      Standardize multi-target --refs pattern across CLI commands. Allow --refs @a @b @c to apply
      operations to multiple items. Could work for: task set, item set, task complete, etc. Design
      how it interacts with existing single-ref positional args.
    created_at: '2026-01-16T22:43:15.094Z'
    tags:
      - cli
      - design
      - dx
    added_by: '@claude'
  - _ulid: 01KF4H984NH3Z41GCFPXXM7D3F
    text: >-
      Skill for branch + PR workflow: handles creating feature branch, committing, pushing, and
      opening PR. Could detect branch protection via gh api rulesets and proactively use PR flow.
      Would replace manual git checkout -b / push / gh pr create dance.
    created_at: '2026-01-16T23:12:10.901Z'
    tags:
      - skill
      - dx
      - workflow
    added_by: '@claude'
  - _ulid: 01KF4WJJJX7V9JQP1PDX1ZE8AM
    text: >-
      PR skill improvements: 1) Ruleset lookup is fragile (fails silently, API may require different
      permissions). Consider simpler check or just try push and handle rejection. 2) Branch name
      prompt is overkill - auto-generate from task slug or recent commit, only ask if unclear.
    created_at: '2026-01-17T02:29:30.845Z'
    tags:
      - skill
      - pr
      - dx
    added_by: '@claude'
  - _ulid: 01KF554T97ST9B3DMT4WMXACYQ
    text: >-
      Ralph Wiggum / Looper Mode - Create a kspec-integrated autonomous loop runner. Core idea: a
      script that runs Claude Code repeatedly with fresh context, using a templated prompt that
      instructs it to:


      1. Run 'kspec session start' to see ready tasks

      2. Pick a well-defined task (high priority, clear spec, no blockers)

      3. Work on it until completion or stuck

      4. Commit and complete the task

      5. Exit cleanly (the outer loop restarts with fresh context)


      Key features from research:

      - Simple core: while :; do cat PROMPT.md | claude ; done

      - Context persists via filesystem/git, not session memory

      - Dual-condition exit: require both completion indicator AND explicit exit signal

      - Circuit breaker: stop after N loops with no progress or repeated errors

      - Rate limiting for API calls


      Kspec-specific additions:

      - Task selection heuristics (prioritize: clear AC, no blockers, isolated scope)

      - Progress tracking via task notes before each exit

      - Session checkpoint before exit to ensure clean state

      - Maybe: task budget (only attempt tasks under estimated N turns)


      The beauty is each iteration starts fresh but inherits cumulative work. Bad iterations don't
      compound context - they just waste one run.
    created_at: '2026-01-17T04:59:17.160Z'
    tags:
      - automation
      - workflow
      - agents
    added_by: '@claude'
  - _ulid: 01KF5YSJPEN2N36PMEZ4X3WPZD
    text: >-
      Ralph streaming mode + library refactor: Consider supporting streaming output mode for ralph.
      If going that far, switch from CLI to library/SDK. Evaluate using ACP (Agent Client Protocol
      by Zed editor team) - reference implementation exists in ../kynetic project. Could borrow
      patterns for tracking iterations and all agent interactions to create audit trail.
    created_at: '2026-01-17T12:27:31.918Z'
    tags:
      - ralph
      - design
      - streaming
    added_by: '@claude'
  - _ulid: 01KF6541Q2CXEXRYFFHAGD53H4
    text: >-
      Ralph TUI mode: Optional terminal UI for ralph that provides real-time visualization of agent
      progress, event stream, session status. Would build on streaming/ACP foundation. Lower
      priority than core auditability work.
    created_at: '2026-01-17T14:18:06.435Z'
    tags:
      - ralph
      - tui
      - optional
    added_by: '@claude'
  - _ulid: 01KF68ATB9QQCJ5A31M4RZJ7BP
    text: >-
      Stub spec pattern: Formalize the practice of creating spec items with status:deferred (or
      similar) for known future work. This captures well-scoped deferrals more formally than inbox,
      with rationale for why deferred. Consider: (1) adding 'deferred' as official status option,
      (2) guidance on when to use stub spec vs inbox, (3) how deferred specs relate to
      backlog/roadmap.
    created_at: '2026-01-17T15:14:13.994Z'
    tags:
      - pattern
      - spec-system
    added_by: '@claude'
  - _ulid: 01KF6FBK4FEE1MK8M9MRFHCNSN
    text: >-
      Setup command improvements for existing kspec repos: When cloning a repo that already uses
      kspec (has kspec-meta branch), the setup/init flow should detect this and automatically create
      the .kspec worktree. Currently requires manual 'git worktree add .kspec kspec-meta'. Could
      also detect missing worktree on any command and prompt to fix, or auto-fix with a flag.
    created_at: '2026-01-17T17:16:59.407Z'
    tags:
      - setup
      - dx
    added_by: '@claude'
  - _ulid: 01KF6FM8KNMB7ZKG8A1AK42N9S
    text: >-
      Create INSTALL.md with agent-focused setup instructions: Step-by-step guide for agents to
      install kspec in a new or existing repo from scratch. Should cover: npm install, kspec init,
      worktree setup for existing repos, common gotchas. Written for AI agents rather than humans -
      concise, copy-pasteable commands, clear success criteria.
    created_at: '2026-01-17T17:21:43.542Z'
    tags:
      - docs
      - dx
      - agents
    added_by: '@claude'
  - _ulid: 01KF6H34MJMWQ8R54AZZ8FKCCH
    text: >-
      ACP type safety audit: Review and strengthen typing across ACP client implementation. Current
      state has respondPermission() typed but other handlers use 'unknown'. Consider: (1) Add typed
      response methods for file/read, file/write, terminal/run (2) Type the request params using SDK
      types (3) Evaluate if we're correctly implementing the full ACP protocol - check SDK docs for
      any missing methods or incorrect assumptions (4) Consider whether respond(unknown) should be
      deprecated in favor of typed methods only. The { granted: true } bug showed the value of
      compile-time enforcement.
    created_at: '2026-01-17T17:47:19.570Z'
    tags:
      - acp
      - types
      - tech-debt
    added_by: '@claude'
  - _ulid: 01KF6KS7H5D8R6H1YHX8BH2FHS
    text: >-
      Adapter validation on startup: Before spawning ACP agent, verify the adapter package exists
      (npx dry-run or version check). Would catch wrong package names like @anthropic-ai vs
      @zed-industries immediately with clear error instead of cryptic 'JsonRpcFraming closed' after
      connection fails.
    created_at: '2026-01-17T18:34:20.582Z'
    tags:
      - ralph
      - dx
      - validation
    added_by: '@claude'
  - _ulid: 01KF6KSAC2Z2PT2Q96WDJEH4ZA
    text: >-
      ACP mock protocol fidelity: Update tests/mocks/acp-mock.js to require permission requests like
      the real agent does. Currently mock auto-succeeds tool calls without permission flow. Would
      have caught the { granted: true } format bug in tests rather than live testing.
    created_at: '2026-01-17T18:34:23.491Z'
    tags:
      - testing
      - acp
      - mock
    added_by: '@claude'
  - _ulid: 01KF6KSD76HC0TVHSZ1KT6DD9B
    text: >-
      Test repo setup command: Add 'kspec clone-for-testing' or similar that creates isolated repo
      copy with: no remote origin, kspec-meta branch available, .kspec worktree set up, specified
      branch checked out. Eliminates manual setup errors like forgotten worktree that caused stale
      data confusion.
    created_at: '2026-01-17T18:34:26.407Z'
    tags:
      - cli
      - dx
      - testing
    added_by: '@claude'
  - _ulid: 01KF6M4QWAZ7AM32WNBPGABVZY
    text: >-
      Ralph output formatting: Current output is a wall of unformatted text. Need structured
      formatting similar to ../kynetic chat/session UI: visual separation between agent messages,
      tool calls, and results. Consider markdown rendering, indentation, colors for different
      content types. Makes agent progress much easier to follow.
    created_at: '2026-01-17T18:40:37.770Z'
    tags:
      - ralph
      - dx
      - ui
    added_by: '@claude'
  - _ulid: 01KF6M4VHRC80YN6S1TQTRRCVX
    text: >-
      Ralph tool usage display: Show tool calls and their output clearly in ralph streaming output.
      Should display: tool name, parameters/command, result/output (possibly truncated). The
      ../kynetic project has patterns for this. Currently tool calls are invisible except for the
      strange hook messages.
    created_at: '2026-01-17T18:40:41.529Z'
    tags:
      - ralph
      - dx
      - ui
    added_by: '@claude'
  - _ulid: 01KF6M4YH9A8T6PADQX7HK89QJ
    text: >-
      Ralph timestamps: Add timestamps to ralph output messages to give sense of timing/pacing.
      Could be relative ('+5s') or absolute. Helps understand how long operations take and identify
      slow points.
    created_at: '2026-01-17T18:40:44.585Z'
    tags:
      - ralph
      - dx
      - ui
    added_by: '@claude'
  - _ulid: 01KF6M53Q9E4ZCV1W90CWKCHW7
    text: >-
      Ralph 'No onPostToolUseHook found' messages: These messages appear throughout ralph output
      (e.g. 'No onPostToolUseHook found for tool use ID: toolu_01Sz5r...'). Need to investigate
      source - likely from ACP agent or SDK logging. Either handle/suppress or make meaningful.
      Currently just noise in output.
    created_at: '2026-01-17T18:40:49.898Z'
    tags:
      - ralph
      - bug
      - acp
    added_by: '@claude'
