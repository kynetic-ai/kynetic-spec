inbox:
  - _ulid: 01KF16XGA6SNNRHFPX15N0HE6F
    text: >-
      Hook for SessionStart or post-compaction to inject relevant context and subtle instructions.
      Could auto-run 'kspec session start' or similar to give agent fresh context after memory is
      compacted.
    created_at: '2026-01-15T16:13:16.998Z'
    tags: []
    added_by: '@claude'
  - _ulid: 01KF1V53RYTWER59VR53W1CSTW
    text: >-
      Spec review process: 3 parallel agents (internal fit, prior art comparison, external research)
      before finalizing major specs. Worked well for shadow branch spec design - should be
      formalized in meta-spec workflows.
    created_at: '2026-01-15T22:06:57.823Z'
    tags:
      - workflow
      - meta
    added_by: '@claude'
  - _ulid: 01KF3PJWJS42Y0QZFKWMX3A4D9
    text: >-
      CLI output parity - JSON and human-readable outputs can drift when adding features.
      Investigate patterns to keep them in sync by design: unified output formatter, schema-driven
      rendering, shared data structure that both modes consume. Current pattern: output(data,
      humanFormatter) - data goes to JSON, formatter handles human. But formatter can show
      derived/computed info that isn't in data.
    created_at: '2026-01-16T15:25:35.193Z'
    tags:
      - cli
      - dx
      - design
    added_by: '@claude'
  - _ulid: 01KF3TB7C5GCC7VADGZ9YDKXK6
    text: >-
      Integration test performance - tests take 50-75s which discourages frequent runs. Investigate:
      parallel test execution, fixture caching, test isolation overhead, selective test runs
      (--grep). Goal: fast feedback loop during development.
    created_at: '2026-01-16T16:31:18.406Z'
    tags:
      - testing
      - dx
      - performance
    added_by: '@claude'
  - _ulid: 01KF3XAY7DRQ8J7E6YTNAPV2FS
    text: >-
      Stale status detection in validate - warn when: (1) umbrella/parent task is pending but child
      spec items are all implemented, (2) spec item marked implemented but no completed tasks
      reference it, (3) task marked completed but linked spec still not_started. Could be part of
      --completeness flag or separate --staleness check. Detected manually this session: Shadow
      Branch parent task was pending while all children implemented.
    created_at: '2026-01-16T17:23:34.765Z'
    tags:
      - validation
      - dx
      - reflection
    added_by: '@claude'
  - _ulid: 01KF42TV18D7HC8S9G4GR9S8ZB
    text: >-
      kspec log enhancements - (1) Without ref argument, show all commits with Task:/Spec: trailers
      (all tracked commits in order). (2) Support passthrough of typical git log args like -p,
      --stat, etc. Could use -- separator for passthrough args: kspec log @ref -- -p --stat
    created_at: '2026-01-16T18:59:38.665Z'
    tags:
      - cli
      - enhancement
    added_by: '@claude'
  - _ulid: 01KF4DS5K10SKW9A533DQR7TH0
    text: >-
      Investigate ready task ordering beyond priority - creation order may not be ideal. Consider:
      recency of notes/activity, dependency depth, spec item priority inheritance, manual ordering
      field, tags for urgency
    created_at: '2026-01-16T22:10:58.273Z'
    tags:
      - design
      - tasks
      - dx
    added_by: '@claude'
  - _ulid: 01KF4FM90P16F3KCVN43SQBBB8
    text: >-
      Standardize multi-target --refs pattern across CLI commands. Allow --refs @a @b @c to apply
      operations to multiple items. Could work for: task set, item set, task complete, etc. Design
      how it interacts with existing single-ref positional args.
    created_at: '2026-01-16T22:43:15.094Z'
    tags:
      - cli
      - design
      - dx
    added_by: '@claude'
  - _ulid: 01KF554T97ST9B3DMT4WMXACYQ
    text: >-
      Ralph Wiggum / Looper Mode - Create a kspec-integrated autonomous loop runner. Core idea: a
      script that runs Claude Code repeatedly with fresh context, using a templated prompt that
      instructs it to:


      1. Run 'kspec session start' to see ready tasks

      2. Pick a well-defined task (high priority, clear spec, no blockers)

      3. Work on it until completion or stuck

      4. Commit and complete the task

      5. Exit cleanly (the outer loop restarts with fresh context)


      Key features from research:

      - Simple core: while :; do cat PROMPT.md | claude ; done

      - Context persists via filesystem/git, not session memory

      - Dual-condition exit: require both completion indicator AND explicit exit signal

      - Circuit breaker: stop after N loops with no progress or repeated errors

      - Rate limiting for API calls


      Kspec-specific additions:

      - Task selection heuristics (prioritize: clear AC, no blockers, isolated scope)

      - Progress tracking via task notes before each exit

      - Session checkpoint before exit to ensure clean state

      - Maybe: task budget (only attempt tasks under estimated N turns)


      The beauty is each iteration starts fresh but inherits cumulative work. Bad iterations don't
      compound context - they just waste one run.
    created_at: '2026-01-17T04:59:17.160Z'
    tags:
      - automation
      - workflow
      - agents
    added_by: '@claude'
  - _ulid: 01KF6541Q2CXEXRYFFHAGD53H4
    text: >-
      Ralph TUI mode: Optional terminal UI for ralph that provides real-time visualization of agent
      progress, event stream, session status. Would build on streaming/ACP foundation. Lower
      priority than core auditability work.
    created_at: '2026-01-17T14:18:06.435Z'
    tags:
      - ralph
      - tui
      - optional
    added_by: '@claude'
  - _ulid: 01KF6FBK4FEE1MK8M9MRFHCNSN
    text: >-
      Setup command improvements for existing kspec repos: When cloning a repo that already uses
      kspec (has kspec-meta branch), the setup/init flow should detect this and automatically create
      the .kspec worktree. Currently requires manual 'git worktree add .kspec kspec-meta'. Could
      also detect missing worktree on any command and prompt to fix, or auto-fix with a flag.
    created_at: '2026-01-17T17:16:59.407Z'
    tags:
      - setup
      - dx
    added_by: '@claude'
  - _ulid: 01KF6H34MJMWQ8R54AZZ8FKCCH
    text: >-
      ACP type safety audit: Review and strengthen typing across ACP client implementation. Current
      state has respondPermission() typed but other handlers use 'unknown'. Consider: (1) Add typed
      response methods for file/read, file/write, terminal/run (2) Type the request params using SDK
      types (3) Evaluate if we're correctly implementing the full ACP protocol - check SDK docs for
      any missing methods or incorrect assumptions (4) Consider whether respond(unknown) should be
      deprecated in favor of typed methods only. The { granted: true } bug showed the value of
      compile-time enforcement.
    created_at: '2026-01-17T17:47:19.570Z'
    tags:
      - acp
      - types
      - tech-debt
    added_by: '@claude'
  - _ulid: 01KF6KS7H5D8R6H1YHX8BH2FHS
    text: >-
      Adapter validation on startup: Before spawning ACP agent, verify the adapter package exists
      (npx dry-run or version check). Would catch wrong package names like @anthropic-ai vs
      @zed-industries immediately with clear error instead of cryptic 'JsonRpcFraming closed' after
      connection fails.
    created_at: '2026-01-17T18:34:20.582Z'
    tags:
      - ralph
      - dx
      - validation
    added_by: '@claude'
  - _ulid: 01KF6KSAC2Z2PT2Q96WDJEH4ZA
    text: >-
      ACP mock protocol fidelity: Update tests/mocks/acp-mock.js to require permission requests like
      the real agent does. Currently mock auto-succeeds tool calls without permission flow. Would
      have caught the { granted: true } format bug in tests rather than live testing.
    created_at: '2026-01-17T18:34:23.491Z'
    tags:
      - testing
      - acp
      - mock
    added_by: '@claude'
  - _ulid: 01KF6KSD76HC0TVHSZ1KT6DD9B
    text: >-
      Test repo setup command: Add 'kspec clone-for-testing' or similar that creates isolated repo
      copy with: no remote origin, kspec-meta branch available, .kspec worktree set up, specified
      branch checked out. Eliminates manual setup errors like forgotten worktree that caused stale
      data confusion.
    created_at: '2026-01-17T18:34:26.407Z'
    tags:
      - cli
      - dx
      - testing
    added_by: '@claude'
  - _ulid: 01KF8TQ5X9Q0Y6DEGWQ9YPECHN
    text: >-
      Transaction/batch mechanics for kspec operations - ability to set a mark point where changes
      don't auto-commit until a final 'commit' call. Could help with bulk operations, rollback on
      errors, and atomic multi-item changes. Challenges: managing state across commands, cleanup on
      abandoned transactions, shadow branch implications. Maybe simpler approach: explicit 'kspec
      bulk' command that takes a script/list of operations and executes them atomically.
    created_at: '2026-01-18T15:14:02.282Z'
    tags:
      - idea
      - cli
      - architecture
    added_by: '@claude'
  - _ulid: 01KF9QWCRSC9Y3PNZW4G9VQ2EW
    text: >-
      inbox delete --refs @a @b @c - delete multiple inbox items in one command. Current workflow
      requires N separate delete calls during triage.
    created_at: '2026-01-18T23:43:41.849Z'
    tags:
      - reflection
      - cli
      - dx
    added_by: '@claude'
  - _ulid: 01KF9QWEFJ3YSAFHCGWJ0CH5PE
    text: >-
      inbox promote --description flag - add description during promote instead of needing to add
      note separately after. Preserves workflow continuity.
    created_at: '2026-01-18T23:43:43.602Z'
    tags:
      - reflection
      - cli
      - dx
    added_by: '@claude'
  - _ulid: 01KF9QWG5XY5AYT8D1F8WZ4TV9
    text: >-
      meta observe --from-inbox @ref - convert inbox item to observation, preserving content. Useful
      during triage when items were captured in wrong bucket.
    created_at: '2026-01-18T23:43:45.341Z'
    tags:
      - reflection
      - cli
      - meta
    added_by: '@claude'
  - _ulid: 01KF9W2HF2W635NJA8XPY81001
    text: Figure out and document a versioning strategy for the package
    created_at: '2026-01-19T00:56:57.571Z'
    tags:
      - docs
      - release
    added_by: '@claude'
  - _ulid: 01KF9WQX8ZAB4F0HBTD790KWHM
    text: Add setup:dev npm script (install + build + link)
    created_at: '2026-01-19T01:08:37.791Z'
    tags:
      - dx
      - reflection
    added_by: '@claude'
  - _ulid: 01KF9WQYNFMTGJ554FDFZNFRV4
    text: Add CI test that kspec command works after build
    created_at: '2026-01-19T01:08:39.216Z'
    tags:
      - ci
      - reflection
    added_by: '@claude'
  - _ulid: 01KF9WR07A33CMM719HTQWQY5Y
    text: Document ESM symlink realpathSync fix for contributors
    created_at: '2026-01-19T01:08:40.810Z'
    tags:
      - docs
      - reflection
    added_by: '@claude'
  - _ulid: 01KFA1Q5AQJN28QE0S7EGNXPT8
    text: >-
      Phase 1: Implement structured error codes and recovery hints for CLI - define CliError type,
      map existing error() calls to structured codes, add recovery suggestions for common error
      scenarios
    created_at: '2026-01-19T02:35:36.152Z'
    tags:
      - agent-first
      - cli
      - phase-1
    added_by: '@claude'
  - _ulid: 01KFA1Q7HQQWW95TX4NZPHWW4C
    text: >-
      Phase 1: Formalize and document CLI exit codes - create exit code constants, update all
      commands to use standardized codes, document in help system
    created_at: '2026-01-19T02:35:38.423Z'
    tags:
      - agent-first
      - cli
      - phase-1
    added_by: '@claude'
  - _ulid: 01KFA1Q9JA5H1FSM05NBA0BFCD
    text: >-
      Phase 1: Implement unified output envelope for JSON mode - wrap all JSON responses in
      consistent structure with success/data/metadata/error fields
    created_at: '2026-01-19T02:35:40.491Z'
    tags:
      - agent-first
      - cli
      - phase-1
    added_by: '@claude'
