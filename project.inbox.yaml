inbox:
  - _ulid: 01KF16XGA6SNNRHFPX15N0HE6F
    text: Hook for SessionStart or post-compaction to inject relevant context and subtle instructions.
      Could auto-run 'kspec session start' or similar to give agent fresh context after memory is
      compacted.
    created_at: 2026-01-15T16:13:16.998Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KF1V53RYTWER59VR53W1CSTW
    text: "Spec review process: 3 parallel agents (internal fit, prior art comparison, external
      research) before finalizing major specs. Worked well for shadow branch spec design - should be
      formalized in meta-spec workflows."
    created_at: 2026-01-15T22:06:57.823Z
    tags:
      - workflow
      - meta
    added_by: "@claude"
  - _ulid: 01KF3PJWJS42Y0QZFKWMX3A4D9
    text: "CLI output parity - JSON and human-readable outputs can drift when adding features.
      Investigate patterns to keep them in sync by design: unified output formatter, schema-driven
      rendering, shared data structure that both modes consume. Current pattern: output(data,
      humanFormatter) - data goes to JSON, formatter handles human. But formatter can show
      derived/computed info that isn't in data."
    created_at: 2026-01-16T15:25:35.193Z
    tags:
      - cli
      - dx
      - design
    added_by: "@claude"
  - _ulid: 01KF4DS5K10SKW9A533DQR7TH0
    text: "Investigate ready task ordering beyond priority - creation order may not be ideal. Consider:
      recency of notes/activity, dependency depth, spec item priority inheritance, manual ordering
      field, tags for urgency"
    created_at: 2026-01-16T22:10:58.273Z
    tags:
      - design
      - tasks
      - dx
    added_by: "@claude"
  - _ulid: 01KF554T97ST9B3DMT4WMXACYQ
    text: >-
      Ralph Wiggum / Looper Mode - Create a kspec-integrated autonomous loop runner. Core idea: a
      script that runs Claude Code repeatedly with fresh context, using a templated prompt that
      instructs it to:


      1. Run 'kspec session start' to see ready tasks

      2. Pick a well-defined task (high priority, clear spec, no blockers)

      3. Work on it until completion or stuck

      4. Commit and complete the task

      5. Exit cleanly (the outer loop restarts with fresh context)


      Key features from research:

      - Simple core: while :; do cat PROMPT.md | claude ; done

      - Context persists via filesystem/git, not session memory

      - Dual-condition exit: require both completion indicator AND explicit exit signal

      - Circuit breaker: stop after N loops with no progress or repeated errors

      - Rate limiting for API calls


      Kspec-specific additions:

      - Task selection heuristics (prioritize: clear AC, no blockers, isolated scope)

      - Progress tracking via task notes before each exit

      - Session checkpoint before exit to ensure clean state

      - Maybe: task budget (only attempt tasks under estimated N turns)


      The beauty is each iteration starts fresh but inherits cumulative work. Bad iterations don't
      compound context - they just waste one run.
    created_at: 2026-01-17T04:59:17.160Z
    tags:
      - automation
      - workflow
      - agents
    added_by: "@claude"
  - _ulid: 01KF6541Q2CXEXRYFFHAGD53H4
    text: "Ralph TUI mode: Optional terminal UI for ralph that provides real-time visualization of agent
      progress, event stream, session status. Would build on streaming/ACP foundation. Lower
      priority than core auditability work."
    created_at: 2026-01-17T14:18:06.435Z
    tags:
      - ralph
      - tui
      - optional
    added_by: "@claude"
  - _ulid: 01KF6H34MJMWQ8R54AZZ8FKCCH
    text: "ACP type safety audit: Review and strengthen typing across ACP client implementation. Current
      state has respondPermission() typed but other handlers use 'unknown'. Consider: (1) Add typed
      response methods for file/read, file/write, terminal/run (2) Type the request params using SDK
      types (3) Evaluate if we're correctly implementing the full ACP protocol - check SDK docs for
      any missing methods or incorrect assumptions (4) Consider whether respond(unknown) should be
      deprecated in favor of typed methods only. The { granted: true } bug showed the value of
      compile-time enforcement."
    created_at: 2026-01-17T17:47:19.570Z
    tags:
      - acp
      - types
      - tech-debt
    added_by: "@claude"
  - _ulid: 01KF6KSAC2Z2PT2Q96WDJEH4ZA
    text: "ACP mock protocol fidelity: Update tests/mocks/acp-mock.js to require permission requests
      like the real agent does. Currently mock auto-succeeds tool calls without permission flow.
      Would have caught the { granted: true } format bug in tests rather than live testing."
    created_at: 2026-01-17T18:34:23.491Z
    tags:
      - testing
      - acp
      - mock
    added_by: "@claude"
  - _ulid: 01KF8TQ5X9Q0Y6DEGWQ9YPECHN
    text: "Transaction/batch mechanics for kspec operations - ability to set a mark point where changes
      don't auto-commit until a final 'commit' call. Could help with bulk operations, rollback on
      errors, and atomic multi-item changes. Challenges: managing state across commands, cleanup on
      abandoned transactions, shadow branch implications. Maybe simpler approach: explicit 'kspec
      bulk' command that takes a script/list of operations and executes them atomically."
    created_at: 2026-01-18T15:14:02.282Z
    tags:
      - idea
      - cli
      - architecture
    added_by: "@claude"
  - _ulid: 01KF9W2HF2W635NJA8XPY81001
    text: Figure out and document a versioning strategy for the package
    created_at: 2026-01-19T00:56:57.571Z
    tags:
      - docs
      - release
    added_by: "@claude"
  - _ulid: 01KFA1Q5AQJN28QE0S7EGNXPT8
    text: "Phase 1: Implement structured error codes and recovery hints for CLI - define CliError type,
      map existing error() calls to structured codes, add recovery suggestions for common error
      scenarios"
    created_at: 2026-01-19T02:35:36.152Z
    tags:
      - agent-first
      - cli
      - phase-1
    added_by: "@claude"
  - _ulid: 01KFA1Q9JA5H1FSM05NBA0BFCD
    text: "Phase 1: Implement unified output envelope for JSON mode - wrap all JSON responses in
      consistent structure with success/data/metadata/error fields"
    created_at: 2026-01-19T02:35:40.491Z
    tags:
      - agent-first
      - cli
      - phase-1
    added_by: "@claude"
  - _ulid: 01KFA1QBTZYQ8C1RJA4PEXRX2M
    text: "Phase 2: Add dry-run support to mutating commands - implement --dry-run flag for task
      add/set, item add/set/delete, derive, inbox promote. Show preview of changes without
      executing"
    created_at: 2026-01-19T02:35:42.815Z
    tags:
      - agent-first
      - cli
      - phase-2
    added_by: "@claude"
  - _ulid: 01KFA1QEC3GS0H6M3MKCFQ01DS
    text: "Phase 2: Add schema introspection commands - kspec help --json-schema, kspec help
      --exit-codes, kspec help commands --json for programmatic CLI discovery"
    created_at: 2026-01-19T02:35:45.411Z
    tags:
      - agent-first
      - cli
      - phase-2
    added_by: "@claude"
  - _ulid: 01KFAG8A1Q8VTJ3TKKQCQ4T7EW
    text: Add automated tests for git hook installation and authorization - test installShadowHook
      function, hook blocking unauthorized commits, hook allowing commits with KSPEC_SHADOW_COMMIT=1
      env var
    created_at: 2026-01-19T06:49:38.104Z
    tags:
      - testing
      - reflection
    added_by: "@claude"
  - _ulid: 01KFBJB72B55D3KVA8PAX3TX2P
    text: Set up biome for linting (replace eslint script) - reference ../kynetic project for config
    created_at: 2026-01-19T16:45:24.940Z
    tags:
      - cli
      - dx
      - tooling
    added_by: "@claude"
  - _ulid: 01KFBJM1XW2DSC0V47Y86EZYHB
    text: "Review RALPH_LOOP_INSTRUCTIONS.md - consolidate into skills or delete. Unique content: PR
      review workflow for autonomous loops, 'every iteration ends with PR' rule, reflect guidance
      for loops. Consider codifying loop-specific reflect behavior into /reflect skill."
    created_at: 2026-01-19T16:50:14.589Z
    tags:
      - docs
      - ralph
    added_by: "@claude"
  - _ulid: 01KFBKA7PCR1VKHEPJBTY843Q9
    text: Review KYNETIC_SPEC_DESIGN.md vs actual .kspec/ spec - identify any gaps/features in design
      doc not yet in spec before clearing out. Bootstrap doc is now obsolete.
    created_at: 2026-01-19T17:02:21.389Z
    tags:
      - docs
      - spec
    added_by: "@claude"
  - _ulid: 01KFC3SV1V0NBY01W9X12K0G08
    text: 'Batch command execution via JSON - Generic kspec batch command that accepts JSON array of CLI
      commands with args. Example: [{"cmd": "item ac add", "ref": "@spec-1", "given": "...", ...}].
      Separates concerns: skills/scripts generate the JSON (smart translation), CLI executes it
      (dumb executor). Supports --dry-run for preview, --file or stdin input. Replaces need for
      command-specific bulk variants. Pairs with skills that translate intent (plan sections,
      templates) into batch JSON.'
    created_at: 2026-01-19T21:50:29.948Z
    tags:
      - cli
      - dx
      - bulk
    added_by: "@claude"
  - _ulid: 01KFCZ3ZXSNS99MDZGMJZSAHC6
    text: Investigate trait-cli.test.ts failures - 12 tests fail in vitest despite manual verification
      working. Implementation is correct, issue is test infrastructure. All tests involve trait
      listing/retrieval after creation. Manual replication works perfectly.
    created_at: 2026-01-20T05:47:54.169Z
    tags:
      - testing
    added_by: "@claude"
  - _ulid: 01KFDQCG96CYSJ5HEK1Q87QMFS
    text: Add feature to spawn worktree for an agent to work in
    created_at: 2026-01-20T12:51:58.887Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KFE2X9RP7HS3SPGH4MGYJCDF
    text: "Ralph loop: Add signal/mechanism for agents to explicitly end the loop when target work is
      complete (e.g., special exit command or completion marker)"
    created_at: 2026-01-20T16:13:23.607Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KFE2XBV8SSJFGQRHBSAP0D4G
    text: "Ralph loop: Enforce submit before complete - task complete should error if task is
      in_progress (not pending_review) with helpful message suggesting 'kspec task submit' first"
    created_at: 2026-01-20T16:13:25.736Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KFE2XDRMFSEAM7DHQCEKG2GT
    text: "Ralph loop: Treat pending_review tasks as highest priority - agents should validate and
      complete these before starting new work"
    created_at: 2026-01-20T16:13:27.700Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KFE2XFQKG1SV7KQ4RSBD6DYP
    text: "Ralph loop: Add --tasks flag to specify explicit task scope (e.g., --tasks @ref1,@ref2) to
      prevent scope creep beyond target work"
    created_at: 2026-01-20T16:13:29.715Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KFE2XHT2AJN680ST7ZXK4TAT
    text: "Ralph loop: Add progress checkpoint output at each iteration showing
      completed/in-progress/remaining counts"
    created_at: 2026-01-20T16:13:31.843Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KFEACSA41B4YJGKBCP6V8M39
    text: >-
      Create /triage-automation skill for systematic task automation eligibility assessment


      ## Why This Matters


      The automation eligibility system (just implemented) provides the *infrastructure* - fields,
      CLI commands, validation. But actually *using* it requires humans to make triage decisions for
      each task. Without a systematic workflow, this becomes:

      - Inconsistent (different criteria applied each time)

      - Slow (have to remember what to check)

      - Undocumented (decisions aren't explained)


      A skill codifies the decision-making process and makes triage efficient.


      ## What the Skill Should Do


      1. **Surface unassessed tasks**: Show tasks where automation is undefined, prioritized by:
         - Priority (P1-P2 first)
         - Has spec_ref (more likely to be eligible)
         - Ready status (actionable now)

      2. **Present context for each task**:
         - Task title, description, spec_ref
         - Linked spec's acceptance criteria
         - Dependencies and blockers
         - Any existing notes

      3. **Guide the eligibility decision** with criteria checklist:
         **Eligible if ALL true:**
         - Has spec_ref with clear acceptance criteria
         - Scope is well-defined and bounded
         - ACs are objectively verifiable (not subjective)
         - No security-critical changes
         - No irreversible operations without confirmation
         - Implementation path is straightforward
         **Manual_only if ANY true:**
         - Requires creative/architectural decisions
         - Involves user-facing UX judgment
         - Touches authentication/authorization
         - Affects billing/payments
         - Requires human approval by design
         - Vague or exploratory scope
         **Needs_review when:**
         - Ralph attempted but got stuck
         - Partial progress, unclear how to continue
         - Encountered unexpected complexity

      4. **Streamline the status update**:
         - Single command to set status with auto-generated reason
         - Add note explaining the decision rationale
         - Move to next unassessed task

      ## Example Workflow


      ```

      > kspec /triage-automation


      === Unassessed Tasks (12) ===


      --- Next: @add-export-command (P2) ---

      Title: Add CSV export for task list

      Spec: @csv-export

      ACs: 4 (all objective, testable)

      Dependencies: none

      Notes: none


      Eligibility Checklist:

      ✓ Has spec_ref with ACs

      ✓ Scope is bounded (single command)

      ✓ ACs are verifiable

      ✓ No security concerns

      ✓ No irreversible ops

      ✓ Clear implementation path


      Recommendation: ELIGIBLE


      [e]ligible / [m]anual_only / [s]kip / [q]uit > e


      OK Set @add-export-command automation: eligible
         Reason: Clear spec with 4 testable ACs, bounded scope, no security concerns

      --- Next: @improve-error-messages (P3) ---

      ...

      ```


      ## Integration Points


      - Uses `kspec tasks ready --unassessed` to find candidates

      - Uses `kspec task get` and `kspec item get` for context

      - Uses `kspec task set --automation` to apply decision

      - Could batch multiple decisions in one session


      ## Success Criteria


      - Reduces time to triage a task from ~2min to ~20sec

      - Documents reasoning for every eligibility decision

      - Creates consistent application of eligibility criteria

      - Enables ralph to self-serve on eligible task discovery
    created_at: 2026-01-20T18:24:11.077Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KFEYSWAKR8W5B23CJV27SSKX
    text: Skip cancelled tasks in derive parent lookup - when deriving tasks, don't use cancelled tasks
      as parent dependencies. Currently a cancelled task is still found and used, requiring manual
      deletion before derive works correctly.
    created_at: 2026-01-21T00:20:51.667Z
    tags:
      - cli
      - derive
      - bug
    added_by: "@claude"
  - _ulid: 01KFEYXF9Y42AYHFPQC43PR13F
    text: "Spec-level depends_on field with derive integration - Add --depends-on flag to kspec item set
      for spec items. When deriving tasks, automatically create task dependencies based on spec
      dependencies. Example: if @spec-A depends_on @spec-B, then kspec derive @spec-A creates task-A
      depending on task-B. Removes need to manually set task dependencies after derive."
    created_at: 2026-01-21T00:22:49.407Z
    tags:
      - cli
      - derive
      - dx
    added_by: "@claude"
  - _ulid: 01KFEZDXXX1XR1M2EAG3BK2GZA
    text: "Ephemeral workflow runs - Add support for workflows that don't persist run state. Use cases:
      simple instruction flows, quick checklists, trivial step sequences. Options: (1) --ephemeral
      flag on 'workflow start', (2) workflow.ephemeral field in definition, (3) both with override.
      Ephemeral runs: no file storage, no shadow commits, not shown in 'workflow runs', state only
      in session context or just sequential display. Reduces noise for simple flows."
    created_at: 2026-01-21T00:31:48.669Z
    tags:
      - workflow
      - dx
    added_by: "@claude"
  - _ulid: 01KFFJVW59XB3CK7C5PYQZDEGN
    text: "Audit and fix incorrect AC annotations in tests - many tests use old format like '// AC-N:'
      instead of the convention '// AC: @spec-ref ac-N'. Should sweep through test files and
      standardize."
    created_at: 2026-01-21T06:11:28.554Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KFGRV3Z5WW29YZJQSK05VGR9
    text: "Test helper should capture stderr on success - Currently helpers/cli.ts returns stderr: ''
      when exit code is 0, making it impossible to test warning messages without JSON mode
      workaround"
    created_at: 2026-01-21T17:15:09.669Z
    tags:
      - reflection
      - dx
      - testing
    added_by: "@claude"
  - _ulid: 01KFGRV6AK641DTPJ243ZAZXD7
    text: Generic --clear-<field> pattern for array fields - Instead of adding --clear-deps,
      --clear-tags, --clear-blocked-by separately, consider a general pattern like --clear <field>
      or --<field> [] syntax
    created_at: 2026-01-21T17:15:12.084Z
    tags:
      - reflection
      - cli
      - dx
    added_by: "@claude"
  - _ulid: 01KFGRV8PQ7F14YYGEJZEXZ2P5
    text: Validation warning for manual_only parent with automation-eligible children that depend on it
      - Catches modeling errors where children are blocked by a parent that will never be worked by
      automation
    created_at: 2026-01-21T17:15:14.519Z
    tags:
      - reflection
      - validation
      - workflow
    added_by: "@claude"
  - _ulid: 01KFGRVB35DPCST95STSM8GR72
    text: Umbrella/parent tasks should depend on children, not vice versa - Parent represents 'validate
      complete feature' and becomes ready when all implementation children are done. Current pattern
      had children depending on parent which blocks them when parent is manual_only
    created_at: 2026-01-21T17:15:16.966Z
    tags:
      - reflection
      - workflow
      - modeling
    added_by: "@claude"
