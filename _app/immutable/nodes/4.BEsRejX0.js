import{o as Pe,p as Dt,c as B,a as s,f as y,d as Ae,t as vt,s as K}from"../chunks/DbNf8dF3.js";import{s as ft,j as Zt,m as x,v as e,y as O,k as Jt,p as X,f as N,a as Y,c as m,n as ut,r as u,aT as $e,aW as ve,Y as At,D as zt,aX as he,u as $,a4 as Wt,q as b,w as ct,x as z,o as Se}from"../chunks/31jCLm1F.js";import{p as S,i as V,r as it,b as Ie,s as Ft,c as Ce,a as Ne}from"../chunks/CrXisG0U.js";import{C as ke,p as Re}from"../chunks/BDZUbTdz.js";import{s as Z,a as It,c as Ot,e as xt,B as $t,b as Kt,j as fe,i as kt,m as De,n as Fe,o as Te,g as Ee,p as Me}from"../chunks/DIMAzWuN.js";import{i as me}from"../chunks/CJk668Ki.js";import{k as Be,l as Ue,p as Ve,b as R,q as We,t as Ke,r as ze,s as Oe,A as Xt,u as te,v as ee,x as Yt,y as qe,z as Ge,H as je,C as pe,d as Tt,a as He,e as qt,g as Gt,c as Le,S as Je,E as Xe,G as le,w as Qt,J as Ye,f as Et,n as Qe,m as Mt,I as Ze,B as tr}from"../chunks/OyQmuBbj.js";import{b as de}from"../chunks/E2YVNu3w.js";import{S as er,a as rr,b as ce,c as ue,d as sr}from"../chunks/BNg_kdqq.js";import{c as Rt}from"../chunks/D39RBmRn.js";import{g as ar}from"../chunks/BIpowRRP.js";function yt(d){let t=ft(Zt(d));return{[Ue]:!0,[Be]:!0,get current(){return e(t)},set current(a){x(t,a,!0)}}}yt.from=Ve;yt.with=R;yt.flatten=We;yt.readonly=Ke;yt.isBox=ze;yt.isWritableBox=Oe;function ir(d){return window.getComputedStyle(d).getPropertyValue("direction")}function nr(d="ltr",t="horizontal"){return{horizontal:d==="rtl"?ee:te,vertical:Yt}[t]}function or(d="ltr",t="horizontal"){return{horizontal:d==="rtl"?te:ee,vertical:Xt}[t]}function lr(d="ltr",t="horizontal"){return["ltr","rtl"].includes(d)||(d="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:nr(d,t),prevKey:or(d,t)}}class dr{#t;#e=yt(null);constructor(t){this.#t=t}getCandidateNodes(){return this.#t.rootNode.current?this.#t.candidateSelector?Array.from(this.#t.rootNode.current.querySelectorAll(this.#t.candidateSelector)):this.#t.candidateAttr?Array.from(this.#t.rootNode.current.querySelectorAll(`[${this.#t.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,a,i=!1){const r=this.#t.rootNode.current;if(!r||!t)return;const l=this.getCandidateNodes();if(!l.length)return;const c=l.indexOf(t),p=ir(r),{nextKey:g,prevKey:_}=lr(p,this.#t.orientation.current),I=this.#t.loop.current,f={[g]:c+1,[_]:c-1,[je]:0,[qe]:l.length-1};if(i){const v=g===Yt?te:Yt,n=_===Xt?ee:Xt;f[v]=c+1,f[n]=c-1}let w=f[a.key];if(w===void 0)return;a.preventDefault(),w<0&&I?w=l.length-1:w===l.length&&I&&(w=0);const h=l[w];if(h)return h.focus(),this.#e.current=h.id,this.#t.onCandidateFocus?.(h),h}getTabIndex(t){const a=this.getCandidateNodes(),i=this.#e.current!==null;return t&&!i&&a[0]===t?(this.#e.current=t.id,0):t?.id===this.#e.current?0:-1}setCurrentTabStopId(t){this.#e.current=t}focusCurrentTabStop(){const t=this.#e.current;if(!t)return;const a=this.#t.rootNode.current?.querySelector(`#${t}`);!a||!Ge(a)||a.focus()}}const St=Le({component:"accordion",parts:["root","trigger","content","item","header"]}),ge=new pe("Accordion.Root"),jt=new pe("Accordion.Item");class _e{opts;rovingFocusGroup;attachment;constructor(t){this.opts=t,this.rovingFocusGroup=new dr({rootNode:this.opts.ref,candidateAttr:St.trigger,loop:this.opts.loop,orientation:this.opts.orientation}),this.attachment=Tt(this.opts.ref)}#t=O(()=>({id:this.opts.id.current,"data-orientation":this.opts.orientation.current,"data-disabled":qt(this.opts.disabled.current),[St.root]:"",...this.attachment}));get props(){return e(this.#t)}set props(t){x(this.#t,t)}}class cr extends _e{opts;isMulti=!1;constructor(t){super(t),this.opts=t,this.includesItem=this.includesItem.bind(this),this.toggleItem=this.toggleItem.bind(this)}includesItem(t){return this.opts.value.current===t}toggleItem(t){this.opts.value.current=this.includesItem(t)?"":t}}class ur extends _e{#t;isMulti=!0;constructor(t){super(t),this.#t=t.value,this.includesItem=this.includesItem.bind(this),this.toggleItem=this.toggleItem.bind(this)}includesItem(t){return this.#t.current.includes(t)}toggleItem(t){this.#t.current=this.includesItem(t)?this.#t.current.filter(a=>a!==t):[...this.#t.current,t]}}class vr{static create(t){const{type:a,...i}=t,r=a==="single"?new cr(i):new ur(i);return ge.set(r)}}class re{static create(t){return jt.set(new re({...t,rootState:ge.get()}))}opts;root;#t=O(()=>this.root.includesItem(this.opts.value.current));get isActive(){return e(this.#t)}set isActive(t){x(this.#t,t)}#e=O(()=>this.opts.disabled.current||this.root.opts.disabled.current);get isDisabled(){return e(this.#e)}set isDisabled(t){x(this.#e,t)}attachment;#r=ft(null);get contentNode(){return e(this.#r)}set contentNode(t){x(this.#r,t,!0)}contentPresence;constructor(t){this.opts=t,this.root=t.rootState,this.updateValue=this.updateValue.bind(this),this.attachment=Tt(this.opts.ref),this.contentPresence=new He({ref:R(()=>this.contentNode),open:R(()=>this.isActive)})}updateValue(){this.root.toggleItem(this.opts.value.current)}#s=O(()=>({id:this.opts.id.current,"data-state":Gt(this.isActive),"data-disabled":qt(this.isDisabled),"data-orientation":this.root.opts.orientation.current,[St.item]:"",...this.attachment}));get props(){return e(this.#s)}set props(t){x(this.#s,t)}}class se{opts;itemState;#t;#e=O(()=>this.opts.disabled.current||this.itemState.opts.disabled.current||this.#t.opts.disabled.current);attachment;constructor(t,a){this.opts=t,this.itemState=a,this.#t=a.root,this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this),this.attachment=Tt(this.opts.ref)}static create(t){return new se(t,jt.get())}onclick(t){if(e(this.#e)||t.button!==0){t.preventDefault();return}this.itemState.updateValue()}onkeydown(t){if(!e(this.#e)){if(t.key===Je||t.key===Xe){t.preventDefault(),this.itemState.updateValue();return}this.#t.rovingFocusGroup.handleKeydown(this.opts.ref.current,t)}}#r=O(()=>({id:this.opts.id.current,disabled:e(this.#e),"aria-expanded":le(this.itemState.isActive),"aria-disabled":le(e(this.#e)),"data-disabled":qt(e(this.#e)),"data-state":Gt(this.itemState.isActive),"data-orientation":this.#t.opts.orientation.current,[St.trigger]:"",tabindex:0,onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return e(this.#r)}set props(t){x(this.#r,t)}}class ae{opts;item;attachment;#t=void 0;#e=!1;#r=ft(Zt({width:0,height:0}));#s=O(()=>this.opts.hiddenUntilFound.current?this.item.isActive:this.opts.forceMount.current||this.item.isActive);get open(){return e(this.#s)}set open(t){x(this.#s,t)}constructor(t,a){this.opts=t,this.item=a,this.#e=this.item.isActive,this.attachment=Tt(this.opts.ref,i=>this.item.contentNode=i),Jt(()=>{const i=requestAnimationFrame(()=>{this.#e=!1});return()=>cancelAnimationFrame(i)}),Qt.pre([()=>this.opts.ref.current,()=>this.opts.hiddenUntilFound.current],([i,r])=>!i||!r?void 0:Pe(i,"beforematch",()=>{this.item.isActive||requestAnimationFrame(()=>{this.item.updateValue()})})),Qt([()=>this.open,()=>this.opts.ref.current],this.#n)}static create(t){return new ae(t,jt.get())}#n=([t,a])=>{a&&Ye(()=>{const i=this.opts.ref.current;if(!i)return;this.#t??={transitionDuration:i.style.transitionDuration,animationName:i.style.animationName},i.style.transitionDuration="0s",i.style.animationName="none";const r=i.getBoundingClientRect();x(this.#r,{width:r.width,height:r.height},!0),!this.#e&&this.#t&&(i.style.transitionDuration=this.#t.transitionDuration,i.style.animationName=this.#t.animationName)})};get shouldRender(){return this.item.contentPresence.shouldRender}#a=O(()=>({open:this.item.isActive}));get snippetProps(){return e(this.#a)}set snippetProps(t){x(this.#a,t)}#i=O(()=>({id:this.opts.id.current,"data-state":Gt(this.item.isActive),"data-disabled":qt(this.item.isDisabled),"data-orientation":this.item.root.opts.orientation.current,[St.content]:"",style:{"--bits-accordion-content-height":`${e(this.#r).height}px`,"--bits-accordion-content-width":`${e(this.#r).width}px`},hidden:this.opts.hiddenUntilFound.current&&!this.item.isActive?"until-found":void 0,...this.opts.hiddenUntilFound.current&&!this.shouldRender?{}:{hidden:this.opts.hiddenUntilFound.current?!this.shouldRender:this.opts.forceMount.current?void 0:!this.shouldRender},...this.attachment}));get props(){return e(this.#i)}set props(t){x(this.#i,t)}}class ie{opts;item;attachment;constructor(t,a){this.opts=t,this.item=a,this.attachment=Tt(this.opts.ref)}static create(t){return new ie(t,jt.get())}#t=O(()=>({id:this.opts.id.current,role:"heading","aria-level":this.opts.level.current,"data-heading-level":this.opts.level.current,"data-state":Gt(this.item.isActive),"data-orientation":this.item.root.opts.orientation.current,[St.header]:"",...this.attachment}));get props(){return e(this.#t)}set props(t){x(this.#t,t)}}var hr=y("<div><!></div>");function fr(d,t){const a=Dt();X(t,!0);let i=S(t,"disabled",3,!1),r=S(t,"value",15),l=S(t,"ref",15,null),c=S(t,"id",19,()=>Et(a)),p=S(t,"onValueChange",3,Qe),g=S(t,"loop",3,!0),_=S(t,"orientation",3,"vertical"),I=it(t,["$$slots","$$events","$$legacy","disabled","children","child","type","value","ref","id","onValueChange","loop","orientation"]);function f(){r()===void 0&&r(t.type==="single"?"":[])}f(),Qt.pre(()=>r(),()=>{f()});const w=vr.create({type:t.type,value:R(()=>r(),P=>{r(P),p()(P)}),id:R(()=>c()),disabled:R(()=>i()),loop:R(()=>g()),orientation:R(()=>_()),ref:R(()=>l(),P=>l(P))}),h=O(()=>Mt(I,w.props));var v=B(),n=N(v);{var o=P=>{var C=B(),F=N(C);Z(F,()=>t.child,()=>({props:e(h)})),s(P,C)},D=P=>{var C=hr();It(C,()=>({...e(h)}));var F=m(C);Z(F,()=>t.children??ut),u(C),s(P,C)};V(n,P=>{t.child?P(o):P(D,!1)})}s(d,v),Y()}var mr=y("<div><!></div>");function pr(d,t){const a=Dt();X(t,!0);const i=Et(a);let r=S(t,"id",3,i),l=S(t,"disabled",3,!1),c=S(t,"value",3,i),p=S(t,"ref",15,null),g=it(t,["$$slots","$$events","$$legacy","id","disabled","value","children","child","ref"]);const _=re.create({value:R(()=>c()),disabled:R(()=>l()),id:R(()=>r()),ref:R(()=>p(),n=>p(n))}),I=O(()=>Mt(g,_.props));var f=B(),w=N(f);{var h=n=>{var o=B(),D=N(o);Z(D,()=>t.child,()=>({props:e(I)})),s(n,o)},v=n=>{var o=mr();It(o,()=>({...e(I)}));var D=m(o);Z(D,()=>t.children??ut),u(o),s(n,o)};V(w,n=>{t.child?n(h):n(v,!1)})}s(d,f),Y()}var gr=y("<div><!></div>");function _r(d,t){const a=Dt();X(t,!0);let i=S(t,"id",19,()=>Et(a)),r=S(t,"level",3,2),l=S(t,"ref",15,null),c=it(t,["$$slots","$$events","$$legacy","id","level","children","child","ref"]);const p=ie.create({id:R(()=>i()),level:R(()=>r()),ref:R(()=>l(),h=>l(h))}),g=O(()=>Mt(c,p.props));var _=B(),I=N(_);{var f=h=>{var v=B(),n=N(v);Z(n,()=>t.child,()=>({props:e(g)})),s(h,v)},w=h=>{var v=gr();It(v,()=>({...e(g)}));var n=m(v);Z(n,()=>t.children??ut),u(v),s(h,v)};V(I,h=>{t.child?h(f):h(w,!1)})}s(d,_),Y()}var br=y("<button><!></button>");function xr(d,t){const a=Dt();X(t,!0);let i=S(t,"disabled",3,!1),r=S(t,"ref",15,null),l=S(t,"id",19,()=>Et(a)),c=it(t,["$$slots","$$events","$$legacy","disabled","ref","id","children","child"]);const p=se.create({disabled:R(()=>i()),id:R(()=>l()),ref:R(()=>r(),h=>r(h))}),g=O(()=>Mt(c,p.props));var _=B(),I=N(_);{var f=h=>{var v=B(),n=N(v);Z(n,()=>t.child,()=>({props:e(g)})),s(h,v)},w=h=>{var v=br();It(v,()=>({type:"button",...e(g)}));var n=m(v);Z(n,()=>t.children??ut),u(v),s(h,v)};V(I,h=>{t.child?h(f):h(w,!1)})}s(d,_),Y()}var yr=y("<div><!></div>");function wr(d,t){const a=Dt();X(t,!0);let i=S(t,"ref",15,null),r=S(t,"id",19,()=>Et(a)),l=S(t,"forceMount",3,!1),c=S(t,"hiddenUntilFound",3,!1),p=it(t,["$$slots","$$events","$$legacy","child","ref","id","forceMount","children","hiddenUntilFound"]);const g=ae.create({forceMount:R(()=>l()),id:R(()=>r()),ref:R(()=>i(),v=>i(v)),hiddenUntilFound:R(()=>c())}),_=O(()=>Mt(p,g.props));var I=B(),f=N(I);{var w=v=>{var n=B(),o=N(n);{let D=O(()=>({props:e(_),...g.snippetProps}));Z(o,()=>t.child,()=>e(D))}s(v,n)},h=v=>{var n=yr();It(n,()=>({...e(_)}));var o=m(n);Z(o,()=>t.children??ut),u(n),s(v,n)};V(f,v=>{t.child?v(w):v(h,!1)})}s(d,I),Y()}var Pr=y("<div></div>");function mt(d,t){X(t,!0);let a=S(t,"ref",15,null),i=it(t,["$$slots","$$events","$$legacy","ref","class"]);var r=Pr();It(r,l=>({"data-slot":"skeleton",class:l,...i}),[()=>Ot("bg-accent animate-pulse rounded-md",t.class)]),Ie(r,l=>a(l),()=>a()),s(d,r),Y()}function Ar(d,t){X(t,!0);let a=it(t,["$$slots","$$events","$$legacy"]);const i=[["path",{d:"m9 18 6-6-6-6"}]];Ze(d,Ft({name:"chevron-right"},()=>a,{get iconNode(){return i},children:(r,l)=>{var c=B(),p=N(c);Z(p,()=>t.children??ut),s(r,c)},$$slots:{default:!0}})),Y()}var $r=y('<button type="button" data-testid="expand-toggle"><!></button>'),Sr=y('<div class="w-6"></div>'),Ir=y('<div class="flex gap-1 ml-auto"></div>'),Cr=y('<div class="pl-4 border-l-2 border-border ml-4" data-testid="tree-node-child"></div>'),Nr=y('<div><div class="flex items-center gap-1 py-2 px-2 rounded-md hover:bg-muted/50"><!> <button type="button" class="flex items-center gap-2 flex-1 text-left" data-testid="node-title"><!> <span class="font-medium"> </span> <!></button></div> <!></div>'),kr=y('<p class="text-center text-muted-foreground py-8">No spec items found</p>'),Rr=y('<div class="space-y-1" data-testid="spec-tree"></div>'),Dr=y('<div class="space-y-1" data-testid="spec-tree-container"><!></div>');function Fr(d,t){X(t,!1);const a=At(),i=(n,o=ut,D=ut)=>{const P=Wt(()=>(e(c),o(),$(()=>e(c).has(o().item._ulid)))),C=Wt(()=>(o(),$(()=>o().children.length>0)));var F=Nr(),nt=m(F),A=m(nt);{var G=E=>{var M=$r();let et;M.__click=()=>g(o().item._ulid);var lt=m(M);Ar(lt,{class:"h-4 w-4"}),u(M),z(()=>{et=fe(M,1,"p-1 rounded hover:bg-muted transition-transform",null,et,{"rotate-90":e(P)}),Kt(M,"aria-expanded",e(P)),Kt(M,"aria-label",e(P)?"Collapse":"Expand")}),s(E,M)},j=E=>{var M=Sr();s(E,M)};V(A,E=>{e(C)?E(G):E(j,!1)})}var H=b(A,2);H.__click=()=>_(o().item);var tt=m(H);{let E=Wt(()=>(o(),$(()=>I(o().item.type))));$t(tt,{get class(){return e(E)},children:(M,et)=>{ct();var lt=vt();z(()=>K(lt,(o(),$(()=>o().item.type)))),s(M,lt)},$$slots:{default:!0}})}var q=b(tt,2),rt=m(q,!0);u(q);var ot=b(q,2);{var pt=E=>{var M=Ir();xt(M,5,()=>(o(),$(()=>o().item.tags.slice(0,2))),kt,(et,lt)=>{$t(et,{variant:"outline",class:"text-xs",children:(Ht,ne)=>{ct();var Ut=vt();z(()=>K(Ut,e(lt))),s(Ht,Ut)},$$slots:{default:!0}})}),u(M),s(E,M)};V(ot,E=>{o(),$(()=>o().item.tags&&o().item.tags.length>0)&&E(pt)})}u(H),u(nt);var wt=b(nt,2);{var Bt=E=>{var M=Cr();xt(M,5,()=>(o(),$(()=>o().children)),et=>et.item._ulid,(et,lt)=>{i(et,()=>e(lt),()=>D()+1)}),u(M),s(E,M)};V(wt,E=>{e(C)&&e(P)&&E(Bt)})}u(F),z(()=>{Kt(F,"data-testid",`tree-node tree-node-${o(),$(()=>o().item.type)??""}`),K(rt,(o(),$(()=>o().item.title)))}),s(n,F)};let r=S(t,"items",8);const l=$e();let c=At(new Set);function p(n){const o=new Map,D=[];return n.forEach(P=>{o.set(P._ulid,{item:P,children:[]})}),n.forEach(P=>{const C=o.get(P._ulid);if(C)if(P.parent){const F=o.get(P.parent);F?F.children.push(C):D.push(C)}else D.push(C)}),D}function g(n){e(c).has(n)?e(c).delete(n):e(c).add(n),x(c,e(c))}function _(n){l("select",n._ulid)}function I(n){return{module:"bg-purple-500",feature:"bg-blue-500",requirement:"bg-green-500",trait:"bg-yellow-500"}[n]||"bg-gray-500"}ve(()=>zt(r()),()=>{x(a,p(r()))}),he(),me();var f=Dr(),w=m(f);{var h=n=>{var o=kr();s(n,o)},v=n=>{var o=Rr();xt(o,5,()=>e(a),D=>D.item._ulid,(D,P)=>{i(D,()=>e(P),()=>0)}),u(o),s(n,o)};V(w,n=>{zt(r()),$(()=>r().length===0)?n(h):n(v,!1)})}u(f),s(d,f),Y()}Ae(["click"]);function Tr(d,t){X(t,!0);let a=S(t,"ref",15,null),i=S(t,"value",15),r=it(t,["$$slots","$$events","$$legacy","ref","value"]);var l=B(),c=N(l);Rt(c,()=>fr,(p,g)=>{g(p,Ft({"data-slot":"accordion"},()=>r,{get ref(){return a()},set ref(_){a(_)},get value(){return i()},set value(_){i(_)}}))}),s(d,l),Y()}var Er=y("<div><!></div>");function Mr(d,t){X(t,!0);let a=S(t,"ref",15,null),i=it(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=B(),l=N(r);Rt(l,()=>wr,(c,p)=>{p(c,Ft({"data-slot":"accordion-content",class:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"},()=>i,{get ref(){return a()},set ref(g){a(g)},children:(g,_)=>{var I=Er(),f=m(I);Z(f,()=>t.children??ut),u(I),z(w=>fe(I,1,w),[()=>De(Ot("pt-0 pb-4",t.class))]),s(g,I)},$$slots:{default:!0}}))}),s(d,r),Y()}function Br(d,t){X(t,!0);let a=S(t,"ref",15,null),i=it(t,["$$slots","$$events","$$legacy","ref","class"]);var r=B(),l=N(r);{let c=O(()=>Ot("border-b last:border-b-0",t.class));Rt(l,()=>pr,(p,g)=>{g(p,Ft({"data-slot":"accordion-item",get class(){return e(c)}},()=>i,{get ref(){return a()},set ref(_){a(_)}}))})}s(d,r),Y()}var Ur=y("<!> <!>",1);function Vr(d,t){X(t,!0);let a=S(t,"ref",15,null),i=S(t,"level",3,3),r=it(t,["$$slots","$$events","$$legacy","ref","class","level","children"]);var l=B(),c=N(l);Rt(c,()=>_r,(p,g)=>{g(p,{get level(){return i()},class:"flex",children:(_,I)=>{var f=B(),w=N(f);{let h=O(()=>Ot("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-start text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t.class));Rt(w,()=>xr,(v,n)=>{n(v,Ft({"data-slot":"accordion-trigger",get class(){return e(h)}},()=>r,{get ref(){return a()},set ref(o){a(o)},children:(o,D)=>{var P=Ur(),C=N(P);Z(C,()=>t.children??ut);var F=b(C,2);ke(F,{class:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"}),s(o,P)},$$slots:{default:!0}}))})}s(_,f)},$$slots:{default:!0}})}),s(d,l),Y()}var Wr=y('<div class="space-y-4"><!> <!> <!> <!></div>'),Kr=y('<div class="flex flex-col gap-4"><!> <p class="text-destructive"> </p></div>'),zr=y('<div class="flex items-center gap-2"><!> <!></div> <!>',1),Or=y('<div><h3 class="text-sm font-semibold mb-2">Tags</h3> <div class="flex flex-wrap gap-1"></div></div>'),qr=y('<span class="text-sm" data-testid="ac-given"> </span>'),Gr=y('<div class="space-y-2 text-sm pl-4"><div data-testid="ac-given-full"><span class="font-medium text-muted-foreground">Given:</span> </div> <div data-testid="ac-when-full"><span class="font-medium text-muted-foreground">When:</span> </div> <div data-testid="ac-then-full"><span class="font-medium text-muted-foreground">Then:</span> </div> <div data-testid="test-coverage-indicator" class="text-xs text-muted-foreground mt-2 uncovered">Coverage: Unknown</div></div>'),jr=y("<!> <!>",1),Hr=y('<div data-testid="acceptance-criteria"><h3 class="text-sm font-semibold mb-2">Acceptance Criteria</h3> <!></div>'),Lr=y('<span data-testid="trait-title"> </span>'),Jr=y('<div data-testid="traits-section"><h3 class="text-sm font-semibold mb-2">Traits</h3> <div class="flex flex-wrap gap-2"></div></div>'),Xr=y('<a class="flex items-center gap-2 p-2 rounded border hover:bg-muted/50 transition-colors" data-testid="linked-task"><!> <span class="text-sm flex-1" data-testid="task-title"> </span> <!></a>'),Yr=y('<div data-testid="implementation-section"><h3 class="text-sm font-semibold mb-2">Implementation</h3> <div class="space-y-2"></div></div>'),Qr=y('<div data-testid="implementation-section"><h3 class="text-sm font-semibold mb-2">Implementation</h3> <p class="text-sm text-muted-foreground">No tasks linked to this spec item yet.</p></div>'),Zr=y('<div class="flex flex-col gap-6"><!> <!> <!> <!> <!></div>');function ts(d,t){X(t,!1);let a=S(t,"ref",8,null),i=S(t,"open",12,!1),r=At(null),l=At([]),c=At(!1),p=At(null);async function g(f){x(c,!0),x(p,null);try{x(r,await Fe(f));const w=await Te(f);x(l,w.items)}catch(w){x(p,w instanceof Error?w.message:"Failed to load item"),x(r,null),x(l,[])}finally{x(c,!1)}}function _(f){return{pending:"bg-gray-500",in_progress:"bg-blue-500",pending_review:"bg-yellow-500",blocked:"bg-red-500",completed:"bg-green-500",cancelled:"bg-gray-400"}[f]||"bg-gray-500"}function I(f){return{pending:"Pending",in_progress:"In Progress",pending_review:"Pending Review",blocked:"Blocked",completed:"Completed",cancelled:"Cancelled"}[f]||f}ve(()=>(zt(a()),zt(i())),()=>{a()&&i()&&g(a())}),he(),me(),er(d,{get open(){return i()},set open(f){i(f)},children:(f,w)=>{rr(f,{class:"sm:max-w-2xl overflow-y-auto","data-testid":"spec-detail-panel",children:(h,v)=>{var n=B(),o=N(n);{var D=C=>{var F=Wr(),nt=m(F);mt(nt,{class:"h-8 w-3/4"});var A=b(nt,2);mt(A,{class:"h-4 w-full"});var G=b(A,2);mt(G,{class:"h-4 w-full"});var j=b(G,2);mt(j,{class:"h-4 w-2/3"}),u(F),s(C,F)},P=C=>{var F=B(),nt=N(F);{var A=j=>{var H=Kr(),tt=m(H);ce(tt,{children:(ot,pt)=>{ue(ot,{children:(wt,Bt)=>{ct();var E=vt("Error");s(wt,E)},$$slots:{default:!0}})},$$slots:{default:!0}});var q=b(tt,2),rt=m(q,!0);u(q),u(H),z(()=>K(rt,e(p))),s(j,H)},G=j=>{var H=B(),tt=N(H);{var q=rt=>{var ot=Zr(),pt=m(ot);ce(pt,{children:(U,W)=>{var Q=zr(),st=N(Q),k=m(st);$t(k,{"data-testid":"implementation-status",children:(T,gt)=>{ct();var dt=vt();z(()=>K(dt,(e(r),$(()=>e(r).type)))),s(T,dt)},$$slots:{default:!0}});var L=b(k,2);ue(L,{"data-testid":"spec-title",children:(T,gt)=>{ct();var dt=vt();z(()=>K(dt,(e(r),$(()=>e(r).title)))),s(T,dt)},$$slots:{default:!0}}),u(st);var ht=b(st,2);{var J=T=>{sr(T,{"data-testid":"spec-description",children:(gt,dt)=>{ct();var at=vt();z(()=>K(at,(e(r),$(()=>e(r).description)))),s(gt,at)},$$slots:{default:!0}})};V(ht,T=>{e(r),$(()=>e(r).description)&&T(J)})}s(U,Q)},$$slots:{default:!0}});var wt=b(pt,2);{var Bt=U=>{var W=Or(),Q=b(m(W),2);xt(Q,5,()=>(e(r),$(()=>e(r).tags)),kt,(st,k)=>{$t(st,{variant:"outline",children:(L,ht)=>{ct();var J=vt();z(()=>K(J,e(k))),s(L,J)},$$slots:{default:!0}})}),u(Q),u(W),s(U,W)};V(wt,U=>{e(r),$(()=>e(r).tags.length>0)&&U(Bt)})}var E=b(wt,2);{var M=U=>{var W=Hr(),Q=b(m(W),2);Tr(Q,{type:"multiple",class:"w-full",children:(st,k)=>{var L=B(),ht=N(L);xt(ht,1,()=>(e(r),$(()=>e(r).acceptance_criteria)),kt,(J,T,gt)=>{Br(J,{get value(){return e(T),$(()=>e(T)._ulid)},"data-testid":"ac-item",children:(dt,at)=>{var Pt=jr(),Vt=N(Pt);Vr(Vt,{"data-testid":"ac-expand-toggle",children:(Ct,be)=>{var bt=qr(),Nt=m(bt);u(bt),z(()=>K(Nt,`AC-${gt+1}: ${e(T),$(()=>e(T).given)??""}`)),s(Ct,bt)},$$slots:{default:!0}});var _t=b(Vt,2);Mr(_t,{children:(Ct,be)=>{var bt=Gr(),Nt=m(bt),xe=b(m(Nt));u(Nt);var Lt=b(Nt,2),ye=b(m(Lt));u(Lt);var oe=b(Lt,2),we=b(m(oe));u(oe),ct(2),u(bt),z(()=>{K(xe,` ${e(T),$(()=>e(T).given)??""}`),K(ye,` ${e(T),$(()=>e(T).when)??""}`),K(we,` ${e(T),$(()=>e(T).then)??""}`)}),s(Ct,bt)},$$slots:{default:!0}}),s(dt,Pt)},$$slots:{default:!0}})}),s(st,L)},$$slots:{default:!0}}),u(W),s(U,W)};V(E,U=>{e(r),$(()=>e(r).acceptance_criteria&&e(r).acceptance_criteria.length>0)&&U(M)})}var et=b(E,2);{var lt=U=>{var W=Jr(),Q=b(m(W),2);xt(Q,5,()=>(e(r),$(()=>e(r).traits)),kt,(st,k)=>{tr(st,{variant:"outline",size:"sm","data-testid":"trait-chip",onclick:()=>{const L=e(k).startsWith("@")?e(k).slice(1):e(k);ar(`${de}/items?ref=${encodeURIComponent(L)}`)},children:(L,ht)=>{var J=Lr(),T=m(J,!0);u(J),z(()=>K(T,e(k))),s(L,J)},$$slots:{default:!0}})}),u(Q),u(W),s(U,W)};V(et,U=>{e(r),$(()=>e(r).traits&&e(r).traits.length>0)&&U(lt)})}var Ht=b(et,2);{var ne=U=>{var W=Yr(),Q=b(m(W),2);xt(Q,5,()=>e(l),kt,(st,k)=>{var L=Xr(),ht=m(L);{let at=Wt(()=>(e(k),$(()=>_(e(k).status))));$t(ht,{get class(){return e(at)},"data-testid":"task-status-badge",children:(Pt,Vt)=>{ct();var _t=vt();z(Ct=>K(_t,Ct),[()=>(e(k),$(()=>I(e(k).status)))]),s(Pt,_t)},$$slots:{default:!0}})}var J=b(ht,2),T=m(J,!0);u(J);var gt=b(J,2);{var dt=at=>{$t(at,{variant:"secondary",class:"text-xs",children:(Pt,Vt)=>{ct();var _t=vt();z(()=>K(_t,`${e(k),$(()=>e(k).notes_count)??""} notes`)),s(Pt,_t)},$$slots:{default:!0}})};V(gt,at=>{e(k),$(()=>e(k).notes_count>0)&&at(dt)})}u(L),z(at=>{Kt(L,"href",`${de??""}/tasks?ref=${at??""}`),K(T,(e(k),$(()=>e(k).title)))},[()=>(e(k),$(()=>encodeURIComponent(e(k)._ulid)))]),s(st,L)}),u(Q),u(W),s(U,W)},Ut=U=>{var W=Qr();s(U,W)};V(Ht,U=>{e(l),$(()=>e(l).length>0)?U(ne):U(Ut,!1)})}u(ot),s(rt,ot)};V(tt,rt=>{e(r)&&rt(q)},!0)}s(j,H)};V(nt,j=>{e(p)?j(A):j(G,!1)},!0)}s(C,F)};V(o,C=>{e(c)?C(D):C(P,!1)})}s(h,n)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),Y()}var es=y('<div class="space-y-4"><!> <!> <!> <!></div>'),rs=y('<div class="rounded-md border border-destructive bg-destructive/10 p-4" data-testid="error-message" role="alert"><p class="text-destructive font-medium">Error loading spec items</p> <p class="text-sm text-destructive/80"> </p></div>'),ss=y('<div class="flex flex-col gap-4"><div class="flex items-center justify-between"><h1 class="text-3xl font-bold">Spec Items</h1> <p class="text-sm text-muted-foreground"> </p></div> <!></div> <!>',1);function ms(d,t){X(t,!0);const a=()=>Ce(Re,"$page",i),[i,r]=Ne();let l=ft(Zt([])),c=ft(!0),p=ft(null),g=ft(null),_=ft(!1);async function I(){x(c,!0),x(p,null);try{const A=await Me();x(l,A.items,!0)}catch(A){x(p,A instanceof Error?A.message:"Failed to load spec items",!0),x(l,[],!0)}finally{x(c,!1)}}function f(A){x(g,A.detail,!0),x(_,!0);const G=new URL(window.location.href);G.searchParams.set("ref",A.detail),window.history.pushState({},"",G)}function w(){x(_,!1);const A=new URL(window.location.href);A.searchParams.delete("ref"),window.history.pushState({},"",A)}Jt(()=>{const A=a().url.searchParams.get("ref");A&&A!==e(g)&&(x(g,A,!0),x(_,!0))}),Se(()=>{I()}),Jt(()=>{Ee()>0&&I()});var h=ss(),v=N(h),n=m(v),o=b(m(n),2),D=m(o);u(o),u(n);var P=b(n,2);{var C=A=>{var G=es(),j=m(G);mt(j,{class:"h-12 w-full"});var H=b(j,2);mt(H,{class:"h-12 w-full"});var tt=b(H,2);mt(tt,{class:"h-12 w-full"});var q=b(tt,2);mt(q,{class:"h-12 w-full"}),u(G),s(A,G)},F=A=>{var G=B(),j=N(G);{var H=q=>{var rt=rs(),ot=b(m(rt),2),pt=m(ot,!0);u(ot),u(rt),z(()=>K(pt,e(p))),s(q,rt)},tt=q=>{Fr(q,{get items(){return e(l)},$$events:{select:f}})};V(j,q=>{e(p)?q(H):q(tt,!1)},!0)}s(A,G)};V(P,A=>{e(c)?A(C):A(F,!1)})}u(v);var nt=b(v,2);ts(nt,{get ref(){return e(g)},get open(){return e(_)},set open(A){x(_,A,!0)},$$events:{close:w}}),z(()=>K(D,`${e(l).length??""} items total`)),s(d,h),Y(),r()}export{ms as component};
