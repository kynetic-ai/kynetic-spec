import{c as q,a as e,f as h,t as K,s as b}from"../chunks/DbNf8dF3.js";import{f as z,p as ct,s as H,j as vt,o as ft,k as ut,m as N,a as pt,c,q as g,w as R,x as P,v as r,r as l}from"../chunks/31jCLm1F.js";import{l as D,s as A,i as C}from"../chunks/CrXisG0U.js";import{g as mt,h as $t,B as U,e as _t,j as gt}from"../chunks/DIMAzWuN.js";import{c as ht}from"../chunks/D39RBmRn.js";import{C as xt,a as bt}from"../chunks/CZGaDAF2.js";import"../chunks/CJk668Ki.js";import{I,s as L}from"../chunks/sJYUIacC.js";function yt(v,a){const o=D(a,["children","$$slots","$$events","$$legacy"]);const d=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];I(v,A({name:"circle-question-mark"},()=>o,{get iconNode(){return d},children:(n,y)=>{var s=q(),f=z(s);L(f,a,"default",{}),e(n,s)},$$slots:{default:!0}}))}function Mt(v,a){const o=D(a,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]];I(v,A({name:"lightbulb"},()=>o,{get iconNode(){return d},children:(n,y)=>{var s=q(),f=z(s);L(f,a,"default",{}),e(n,s)},$$slots:{default:!0}}))}function wt(v,a){const o=D(a,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];I(v,A({name:"triangle-alert"},()=>o,{get iconNode(){return d},children:(n,y)=>{var s=q(),f=z(s);L(f,a,"default",{}),e(n,s)},$$slots:{default:!0}}))}function Nt(v,a){const o=D(a,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];I(v,A({name:"zap"},()=>o,{get iconNode(){return d},children:(n,y)=>{var s=q(),f=z(s);L(f,a,"default",{}),e(n,s)},$$slots:{default:!0}}))}var Pt=h('<div class="rounded-md bg-red-50 p-4 text-sm text-red-800" data-testid="error"> </div>'),qt=h('<div class="text-center text-muted-foreground" data-testid="loading">Loading observations...</div>'),zt=h('<div class="text-center text-muted-foreground" data-testid="observations-empty"><p>No unresolved observations.</p> <p class="text-sm">Observations are captured during work sessions.</p></div>'),jt=h('<p class="mt-2 text-xs text-muted-foreground border-l-2 border-muted pl-3"> </p>'),kt=h('<div class="flex items-start gap-3"><div data-testid="observation-type-icon"><!></div> <div class="flex-1"><div class="flex items-center gap-2 mb-2"><!> <span class="text-xs text-muted-foreground"> </span></div> <p class="text-sm leading-relaxed" data-testid="observation-content"> </p> <!></div></div>'),Ct=h('<div class="flex flex-col gap-3"></div>'),Dt=h('<div class="flex flex-col gap-4" data-testid="observations-panel"><div class="flex items-center justify-between"><h1 class="text-3xl font-bold">Observations</h1> <!></div> <!> <!></div>');function Qt(v,a){ct(a,!0);let o=H(vt([])),d=H(!0),n=H("");const y={friction:wt,success:Nt,question:yt,idea:Mt},s={friction:"text-red-600",success:"text-green-600",question:"text-blue-600",idea:"text-yellow-600"},f={friction:"Friction",success:"Success",question:"Question",idea:"Idea"};ft(async()=>{await Q()}),ut(()=>{mt()>0&&Q()});async function Q(){try{N(d,!0),N(n,"");const t=await $t({resolved:!1});N(o,t.items,!0)}catch(t){N(n,t instanceof Error?t.message:"Failed to load observations",!0)}finally{N(d,!1)}}function W(t){const i=new Date(t),M=new Date().getTime()-i.getTime(),w=Math.floor(M/6e4),u=Math.floor(M/36e5),m=Math.floor(M/864e5);return w<1?"just now":w<60?`${w}m ago`:u<24?`${u}h ago`:m<7?`${m}d ago`:i.toLocaleDateString()}var O=Dt(),T=c(O),X=g(c(T),2);U(X,{variant:"secondary","data-testid":"observations-count",children:(t,i)=>{R();var $=K();P(()=>b($,`${r(o).length??""} unresolved`)),e(t,$)},$$slots:{default:!0}}),l(T);var V=g(T,2);{var Y=t=>{var i=Pt(),$=c(i,!0);l(i),P(()=>b($,r(n))),e(t,i)};C(V,t=>{r(n)&&t(Y)})}var tt=g(V,2);{var et=t=>{var i=qt();e(t,i)},at=t=>{var i=q(),$=z(i);{var M=u=>{var m=zt();e(u,m)},w=u=>{var m=Ct();_t(m,21,()=>r(o),B=>B._ulid,(B,_)=>{xt(B,{"data-testid":"observation-item",children:(st,At)=>{bt(st,{class:"pb-3",children:(rt,It)=>{var F=kt(),j=c(F),ot=c(j);ht(ot,()=>y[r(_).type],(p,x)=>{x(p,{class:"h-5 w-5"})}),l(j);var Z=g(j,2),S=c(Z),G=c(S);U(G,{variant:"outline","data-testid":"observation-type",children:(p,x)=>{R();var k=K();P(()=>b(k,f[r(_).type])),e(p,k)},$$slots:{default:!0}});var J=g(G,2),nt=c(J,!0);l(J),l(S);var E=g(S,2),it=c(E,!0);l(E);var dt=g(E,2);{var lt=p=>{var x=jt(),k=c(x,!0);l(x),P(()=>b(k,r(_).context)),e(p,x)};C(dt,p=>{r(_).context&&p(lt)})}l(Z),l(F),P(p=>{gt(j,1,`mt-0.5 ${s[r(_).type]}`),b(nt,p),b(it,r(_).content)},[()=>W(r(_).created_at)]),e(rt,F)},$$slots:{default:!0}})},$$slots:{default:!0}})}),l(m),e(u,m)};C($,u=>{r(o).length===0?u(M):u(w,!1)},!0)}e(t,i)};C(tt,t=>{r(d)?t(et):t(at,!1)})}l(O),e(v,O),pt()}export{Qt as component};
